<!DOCTYPE html>
<!--[if IE 8]> 				 <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<head>
  <meta charset="utf-8">
  <title>Advent Art：北斎の絵を生成する</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="この記事は毎年日本のF#コミュニティで主催されているF# Advent Calendarへの寄稿です。それゆえに、日本文化にインスパイアされたものになっています。ここではFreebaseにある日本の画家一覧を参照して、フラクタルとFunScript（！）を組み合わせることで絵画の一部の再生成を試みています。">
  <meta name="author" content="Tomas Petricek">

  <!-- Reference Foundation -->
  <link rel="stylesheet" href="http://tomasp.net/css/foundation.css">
  <script src="js/vendor/custom.modernizr.js"></script>

  <link rel="alternate" type="application/rss+xml" href="http://tomasp.net/rss.xml" title="RSS feed for Tomas Petricek's blog">
  <link rel="icon" type="image/png" href="http://tomasp.net/img/favicon.png" />
    
  <!-- Reference custom CSS and tooltips -->
  <link type="text/css" rel="stylesheet" href="http://tomasp.net/custom/style.css" />
  <script type="text/javascript" src="http://tomasp.net/custom/tooltips.js"></script>
  <link type="text/css" rel="stylesheet" href="http://tomasp.net/custom/tooltips.css" />
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  <meta name="twitter:card" content="summary">
  <meta name="twitter:creator" content="@tomaspetricek">
  <meta name="twitter:title" content="Advent Art：北斎の絵を生成する">
  <meta name="twitter:description" content="この記事は毎年日本のF#コミュニティで主催されているF# Advent Calendarへの寄稿です。それゆえに、日本文化にインスパイアされたものになっています。ここではFreebaseにある日本の画家一覧を参照して、フラクタルとFunScript（！）を組み合わせることで絵画の一部の再生成を試みています。">
</head>
<body>

   <header id="top-header">
    <div class="row">
      <div class="twelve columns">
        <h1><a href="http://tomasp.net/">Tomas Petricek's blog</a></h1>
        <p>Writing about practical F# coding and programming language research</p>
      </div>
    </div>
  </header>

  <header class="top-bar-header">
    <div class="contain-to-grid sticky">
    <nav class="top-bar">

    <ul class="title-area">
      <li class="name"><h1><a href="#"></a></h1></li>
      <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>
    <section class="top-bar-section">
      <ul class="right">
        <li><a href="http://tomasp.net/blog/index.html">Blog</a></li>
        <li><a href="http://functional-programming.net">Books</a></li>
        <li><a href="http://fsharpworks.com/workshops.html">Trainings</a></li>
        <li><a href="http://fsharpworks.com">Consulting</a></li>
        <li><a href="http://tomasp.net/academic">Research</a></li>
      </ul>
    </section>

    </nav></div>
  </header>
  
  
<div class="row">
	<div class="large-8 columns main-content">
    <content>
      

<h1>Advent Art：北斎の絵を生成する</h1>

<div id="myModal" class="reveal-modal xlarge" data-reveal>
  <iframe src="hokusai.html" style="width:100%; height:850px;border-style:none;"></iframe>
  <a class="close-reveal-modal">&#215;</a>
</div>

<div class="rdecor" style="text-align:center">
<a href="#" data-reveal-id="myModal" style="text-align:center">
<img src="hokusai_sm.jpg" style="margin-bottom:10px;border:4px solid black" title="神奈川沖浪裏 (The Great Wave off Kanagawa)" /><br />
<small style="font-size:90%">実際の結果を見るにはここをクリック！</small>
</a>
</div>

<p>ここ数年、日本のF# コミュニティは「F# Advent Calendar」というイベントを開催しています
(<a href="http://atnd.org/events/10685">2010年</a>、
<a href="http://partake.in/events/1c24993a-c475-4fc2-bca4-7a1cd2f81869">2011年</a>、
<a href="http://atnd.org/events/33927">2012年</a>、
そして <a href="http://connpass.com/event/3935/">今年</a>)。
これはadvent dayごとに1人ずつ、F#に関連した何かしら興味深い記事を作成するというものです。
私は去年からTwitterでadvent calendarをチェックしていて、
今年からは私も参加しようと思い、記事を書きたいと申し出ました。
そうしたところ、数名の方からの協力を得ることができました。
<a href="https://twitter.com/igeta">@igeta</a> には参加手続きの諸々とレビューを、
<a href="http://twitter.com/yukitos">@yukitos</a> にはこの記事の翻訳を、そして
<a href="http://twitter.com/gab_km">@gab_km</a> には翻訳のレビューをしていただきました。
ありがとう！</p>

<p>けれども何についての記事を書くのがよいのでしょう？
過去一年にわたって、F#コミュニティで開発されているF#のオープンソースライブラリやプロジェクトを
いくつか紹介できるような記事がよさそうです。
それと同時に、日本に関連のあるトピックが何かないものでしょうか？
少し考えてみたところ、以下のようなプランを思いつきました：</p>

<ul>
<li><p>まず、日本の絵画について学ぶために <a href="http://fsharp.github.io/FSharp.Data/">F# Data</a> ライブラリと <a href="http://www.freebase.com">Freebase</a> を組み合わせて使う。
このライブラリにはいまや <a href="https://github.com/fsharp/FSharp.Data/blob/master/docs/content/ja/index.md">日本語ドキュメント</a> があり、作成してくれた <a href="https://twitter.com/yukitos">@yukitos</a> に感謝しています。</p></li>
<li><p>そして絵画作品を1つ選択して、F#でその作品を再生成する。
私の絵画スキルでは到底無理なのですが、試してみることはできます :-)</p></li>
<li><p>最後に、 <a href="http://funscript.info">FunScriptプロジェクト</a> を使って
F#コードをJavaScriptに変換します。
そうすると純粋なHTML Webアプリケーションとして実行できるようになり、
携帯電話やその他のデバイスでも動作するようになります。</p></li>
</ul>

<h2>日本の芸術の探索</h2>

<p><a href="http://www.freebase.com">Freebase</a> は主にWikipediaを情報源とする
体系的な情報を持ったオンラインのグラフデータベースです。
このデータベースには(政治、芸能などの)社会や(多種多様な)スポーツ、
(コンピュータや化学などの)サイエンス、そして芸術など、様々な分野に関する情報が
含まれています。</p>

<p>F# DataにあるFreebase用のF# 型プロバイダーを使用すると、
コードエディタ上から直接これらの情報すべてにアクセスできます。
この型プロバイダーを使うには、まず <code>FSharp.Data</code> のNuGetパッケージをインストールした後、
以下のようにしてアセンブリへの参照を追加します：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="prep">#I</span> <span class="s">&quot;</span><span class="s">.</span><span class="s">.</span><span class="s">/</span><span class="s">packages</span><span class="s">/</span><span class="s">FSharp</span><span class="s">.</span><span class="s">Data</span><span class="s">.</span><span class="s">1</span><span class="s">.</span><span class="s">1</span><span class="s">.</span><span class="s">10</span><span class="s">/</span><span class="s">lib</span><span class="s">/</span><span class="s">net40</span><span class="s">&quot;</span>
<span class="prep">#r</span> <span class="s">&quot;</span><span class="s">FSharp</span><span class="s">.</span><span class="s">Data</span><span class="s">.</span><span class="s">dll</span><span class="s">&quot;</span>

<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">Data</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="i">Linq</span></pre>
</td>
</tr>
</table>

<p><code>FSharp.Data</code> とは別に、いくつかLINQメソッドを使ってデータを探索します。
Freebaseへのアクセスには <code>FreebaseData</code> または <code>FreebaseDataProvider</code> を使います。
後者には大量のリクエストを発行するコードを作成する場合に必要になるAPIキーを指定します。
サンプルをきちんと動かすためには、登録を行う必要があるでしょう：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="i">FreebaseData</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="i">FreebaseDataProvider</span><span class="o">&lt;</span><span id="fst7" onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7, document.getElementById('fst7'))" class="omitted">(自分のキーをこの位置に入力すること)</span><span class="o">&gt;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 8)" onmouseover="showTip(event, 'fs8', 8)" class="i">fb</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 9)" onmouseover="showTip(event, 'fs5', 9)" class="i">FreebaseData</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 10)" onmouseover="showTip(event, 'fs9', 10)" class="i">GetDataContext</span>()</pre>
</td>
</tr>
</table>

<p>そして <code>fb.</code> と入力すると、Freebase上で利用できる各分野が一覧表示されます。
たとえば絵画や画家が含まれている「Visual Art」の分野を参照して、
(「Visual Artists」という)リストから1番目の画家を取得し、
画家に関する情報を調べることができます：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs10', 11)" onmouseover="showTip(event, 'fs10', 11)" class="i">art</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 12)" onmouseover="showTip(event, 'fs8', 12)" class="i">fb</span><span class="o">.</span><span class="i">``Arts and Entertainment``</span><span class="o">.</span><span class="i">``Visual Art``</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 13)" onmouseover="showTip(event, 'fs11', 13)" class="i">ldv</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs10', 14)" onmouseover="showTip(event, 'fs10', 14)" class="i">art</span><span class="o">.</span><span class="i">``Visual Artists``</span><span class="o">.</span><span class="i">First</span>()
<span onmouseout="hideTip(event, 'fs11', 15)" onmouseover="showTip(event, 'fs11', 15)" class="i">ldv</span><span class="o">.</span><span class="i">``Country of nationality``</span>
<span onmouseout="hideTip(event, 'fs11', 16)" onmouseover="showTip(event, 'fs11', 16)" class="i">ldv</span><span class="o">.</span><span class="i">Artworks</span></pre>
</td>
</tr>
</table>

<p>このコードを実行してみると、リストの1番目の画家が
レオナルド・ダ・ビンチ(Leonardo da Vinci)であることが確認できるでしょう。
<code>Country of nationality</code> プロパティは実際にはlistを返しますが、
今回の場合は単にイタリア(Italy)という1カ国の名前だけが含まれます。
また、 <code>Artworks</code> プロパティを使うと画家の作品一覧を取得できます。</p>

<p>次に、日本国籍を持った画家一覧を見つけるクエリを作成します
(簡単のために、国籍リストの最初の1つだけしかチェックしていません)：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 日本の画家を探すためのクエリ</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 17)" onmouseover="showTip(event, 'fs12', 17)" class="i">artists</span> <span class="o">=</span>
  <span onmouseout="hideTip(event, 'fs13', 18)" onmouseover="showTip(event, 'fs13', 18)" class="i">query</span> { <span class="k">for</span> <span onmouseout="hideTip(event, 'fs14', 19)" onmouseover="showTip(event, 'fs14', 19)" class="i">p</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs10', 20)" onmouseover="showTip(event, 'fs10', 20)" class="i">art</span><span class="o">.</span><span class="i">``Visual Artists``</span> <span class="k">do</span>
          <span onmouseout="hideTip(event, 'fs15', 21)" onmouseover="showTip(event, 'fs15', 21)" class="k">where</span> (<span onmouseout="hideTip(event, 'fs14', 22)" onmouseover="showTip(event, 'fs14', 22)" class="i">p</span><span class="o">.</span><span class="i">``Country of nationality``</span><span class="o">.</span><span class="i">Count</span>() <span class="o">&gt;</span> <span class="n">0</span>)
          <span onmouseout="hideTip(event, 'fs15', 23)" onmouseover="showTip(event, 'fs15', 23)" class="k">where</span> (<span onmouseout="hideTip(event, 'fs14', 24)" onmouseover="showTip(event, 'fs14', 24)" class="i">p</span><span class="o">.</span><span class="i">``Country of nationality``</span><span class="o">.</span><span class="i">First</span>()<span class="o">.</span><span class="i">Name</span> <span class="o">=</span> <span class="s">&quot;</span><span class="s">Japan</span><span class="s">&quot;</span>) }

<span class="c">// 検索された画家全員の名前を表示</span>
<span class="k">for</span> <span onmouseout="hideTip(event, 'fs16', 25)" onmouseover="showTip(event, 'fs16', 25)" class="i">a</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs12', 26)" onmouseover="showTip(event, 'fs12', 26)" class="i">artists</span> <span class="k">do</span> 
  <span onmouseout="hideTip(event, 'fs17', 27)" onmouseover="showTip(event, 'fs17', 27)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">%</span><span class="s">s</span><span class="s"> </span><span class="s">(</span><span class="s">%</span><span class="s">s</span><span class="s">)</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs16', 28)" onmouseover="showTip(event, 'fs16', 28)" class="i">a</span><span class="o">.</span><span class="i">Name</span> <span onmouseout="hideTip(event, 'fs16', 29)" onmouseover="showTip(event, 'fs16', 29)" class="i">a</span><span class="o">.</span><span class="i">``Date of birth``</span></pre>
</td>
</tr>
</table>

<p>このスニペットを実行すると、Yoshitaka Amano(天野喜孝)やIsamu Noguchi(イサムノグチ)、
Takashi Murakami(村上隆)といった20世紀生まれの画家が最初に表示されます。
<code>sortBy</code> や <code>sortByDescending</code> を追加して、特定の順序に並び替えることもできます。
また、特定の1人の画家を検索するクエリに <code>head</code> を組み合わせて、1人の画家に関する
詳細情報を取得することもできます：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 北斎に関する詳細情報を検索</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 30)" onmouseover="showTip(event, 'fs18', 30)" class="i">hok</span> <span class="o">=</span> 
  <span onmouseout="hideTip(event, 'fs13', 31)" onmouseover="showTip(event, 'fs13', 31)" class="i">query</span> { <span class="k">for</span> <span onmouseout="hideTip(event, 'fs19', 32)" onmouseover="showTip(event, 'fs19', 32)" class="i">p</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs10', 33)" onmouseover="showTip(event, 'fs10', 33)" class="i">art</span><span class="o">.</span><span class="i">``Visual Artists``</span> <span class="k">do</span>
          <span onmouseout="hideTip(event, 'fs15', 34)" onmouseover="showTip(event, 'fs15', 34)" class="k">where</span> (<span onmouseout="hideTip(event, 'fs19', 35)" onmouseover="showTip(event, 'fs19', 35)" class="i">p</span><span class="o">.</span><span class="i">Name</span> <span class="o">=</span> <span class="s">&quot;</span><span class="s">Hokusai</span><span class="s">&quot;</span>)
          <span onmouseout="hideTip(event, 'fs20', 36)" onmouseover="showTip(event, 'fs20', 36)" class="k">head</span> }

<span class="c">// 画像のURLや説明文、作品一覧を表示</span>
<span onmouseout="hideTip(event, 'fs17', 37)" onmouseover="showTip(event, 'fs17', 37)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">&lt;</span><span class="s">img</span><span class="s"> </span><span class="s">src</span><span class="s">=</span><span class="s">\&quot;</span><span class="s">%</span><span class="s">s</span><span class="s">\&quot;</span><span class="s"> </span><span class="s">/</span><span class="s">&gt;</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs18', 38)" onmouseover="showTip(event, 'fs18', 38)" class="i">hok</span><span class="o">.</span><span class="i">MainImage</span>
<span onmouseout="hideTip(event, 'fs17', 39)" onmouseover="showTip(event, 'fs17', 39)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">&lt;</span><span class="s">p</span><span class="s">&gt;</span><span class="s">%</span><span class="s">s</span><span class="s">&lt;</span><span class="s">/</span><span class="s">p</span><span class="s">&gt;</span><span class="s">&quot;</span> (<span onmouseout="hideTip(event, 'fs18', 40)" onmouseover="showTip(event, 'fs18', 40)" class="i">hok</span><span class="o">.</span><span class="i">Blurb</span><span class="o">.</span><span class="i">First</span>())
<span class="k">for</span> <span onmouseout="hideTip(event, 'fs16', 41)" onmouseover="showTip(event, 'fs16', 41)" class="i">a</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs18', 42)" onmouseover="showTip(event, 'fs18', 42)" class="i">hok</span><span class="o">.</span><span class="i">Artworks</span> <span class="k">do</span>
  <span onmouseout="hideTip(event, 'fs17', 43)" onmouseover="showTip(event, 'fs17', 43)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">&lt;</span><span class="s">h3</span><span class="s">&gt;</span><span class="s">%</span><span class="s">s</span><span class="s">&lt;</span><span class="s">/</span><span class="s">h3</span><span class="s">&gt;</span><span class="s">&lt;</span><span class="s">img</span><span class="s"> </span><span class="s">src</span><span class="s">=</span><span class="s">\&quot;</span><span class="s">%</span><span class="s">s</span><span class="s">\&quot;</span><span class="s"> </span><span class="s">/</span><span class="s">&gt;</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs16', 44)" onmouseover="showTip(event, 'fs16', 44)" class="i">a</span><span class="o">.</span><span class="i">Name</span> <span onmouseout="hideTip(event, 'fs16', 45)" onmouseover="showTip(event, 'fs16', 45)" class="i">a</span><span class="o">.</span><span class="i">MainImage</span></pre>
</td>
</tr>
</table>

<p>スニペットの後半では北斎の様々な情報をHTML形式で出力しています。
結果は以下のようになります：</p>

<img src="https://usercontent.googleapis.com/freebase/v1/image/wikipedia/images/commons_id/447534?key=AIzaSyCEgJTvxPjj6zqLKTK06nPYkUooSO1tB0w" class="rdecor" />

<blockquote>
<p>
Katsushika Hokusai (葛飾 北斎, September 23, 1760 – May 10, 1849) was a Japanese artist, 
ukiyo-e painter and printmaker of the Edo period. He was influenced by such painters as 
Sesshu, and other styles of Chinese painting. Born in Edo (now Tokyo), Hokusai is best 
known as author of the woodblock print series Thirty-six Views of Mount Fuji (富嶽三十六景, 
Fugaku Sanjūroku-kei, c. 1831) which includes the internationally recognized print, The 
Great Wave off Kanagawa, created during the 1820s. 
</p>
<div class="row">
  <div class="large-3 columns" style="text-align:center">
    <strong>The Dream of the Fisherman's Wife</strong><br /><img style="margin:10px" src="https://usercontent.googleapis.com/freebase/v1/image/wikipedia/images/commons_id/120391?key=AIzaSyCEgJTvxPjj6zqLKTK06nPYkUooSO1tB0w" />
  </div>
  <div class="large-3 columns" style="text-align:center">
    <strong>The Great Wave off Kanagawa</strong><br /><img style="margin:10px" src="https://usercontent.googleapis.com/freebase/v1/image/wikipedia/images/commons_id/2646210?key=AIzaSyCEgJTvxPjj6zqLKTK06nPYkUooSO1tB0w" />
  </div>
  <div class="large-3 columns" style="text-align:center">
    <strong>Travellers Crossing the Oi River</strong><br /><img style="margin:10px" src="https://usercontent.googleapis.com/freebase/v1/image/m/07h65g7?key=AIzaSyCEgJTvxPjj6zqLKTK06nPYkUooSO1tB0w" />
  </div>
  <div class="large-3 columns" style="text-align:center">
    <strong>Red Fuji</strong><br /><img style="margin:10px" src="https://usercontent.googleapis.com/freebase/v1/image/wikipedia/images/commons_id/313228?key=AIzaSyCEgJTvxPjj6zqLKTK06nPYkUooSO1tB0w" />
  </div>
</div> 
<div class="row">
  <div class="large-3 columns" style="text-align:center">
    <strong>Feminine Wave</strong><br /><img style="margin:10px" src="https://usercontent.googleapis.com/freebase/v1/image/m/07h6hz5?key=AIzaSyCEgJTvxPjj6zqLKTK06nPYkUooSO1tB0w" />
  </div>
  <div class="large-3 columns" style="text-align:center">
    <strong>Masculine Wave</strong><br /><img style="margin:10px" src="https://usercontent.googleapis.com/freebase/v1/image/m/07h6kpr?key=AIzaSyCEgJTvxPjj6zqLKTK06nPYkUooSO1tB0w" />
  </div>
  <div class="large-3 columns" style="text-align:center">
    <strong>Black Fuji</strong><br /><img style="margin:10px" src="https://usercontent.googleapis.com/freebase/v1/image/m/07h6qjh?key=AIzaSyCEgJTvxPjj6zqLKTK06nPYkUooSO1tB0w" />
  </div>
  <div class="large-3 columns" style="text-align:center">
    <strong>Oceans of Wisdom</strong><br /><img style="margin:10px" src="https://usercontent.googleapis.com/freebase/v1/image/wikipedia/images/en_id/25174350?key=AIzaSyCEgJTvxPjj6zqLKTK06nPYkUooSO1tB0w" />
  </div>
</div> 
</blockquote>

<h2>北斎とフラクタル</h2>

<p>北斎の作品を見てみると、フラクタルのように見えるものがいくつかあることがわかります。
<a href="https://www.google.com/search?q=hokusai+fractal&amp;tbm=isch">Hokusai と fractal でGoogle画像検索</a>
してみると、北斎の作品とよく似たフラクタルが多数見つかることがわかります。</p>

<p>この記事ではジュリア集合のフラクタルを使います。
このフラクタルは(特にF#を使用すると)非常に簡単に描画できます。
神奈川沖浪裏(The Great Wave off Kanagawa)によく似たフラクタルになるようにするため、
フラクタルを色づけるためのカラーパレットを慎重に選択することになります。</p>

<h3>ジュリア集合の計算</h3>

<p>ジュリア集合については <a href="http://en.wikipedia.org/wiki/Julia_set">Wikipediaのページ</a>
に詳しいので、ここでは動作の詳細については説明しません。
大まかにいえば、複素数のシーケンスを生成して、何らかの定数 <em>c</em> に対して
各ステップ毎に
<em>c<sub>next</sub> = c<sub>prev</sub><sup>2</sup> + c</em>
という式で次の値を計算していきます。
この反復処理は無限のシーケンスを生成する(可能性のある)
再帰的なシーケンス式を書くことでいい具合に作成できます：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs3', 46)" onmouseover="showTip(event, 'fs3', 46)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 47)" onmouseover="showTip(event, 'fs21', 47)" class="i">Drawing</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs3', 48)" onmouseover="showTip(event, 'fs3', 48)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs22', 49)" onmouseover="showTip(event, 'fs22', 49)" class="i">Numerics</span>

<span class="c">/// それらしいフラクタルを生成するための定数</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs23', 50)" onmouseover="showTip(event, 'fs23', 50)" class="i">c</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs24', 51)" onmouseover="showTip(event, 'fs24', 51)" class="i">Complex</span>(<span class="o">-</span><span class="n">0.70176</span>, <span class="o">-</span><span class="n">0.3842</span>)

<span class="c">/// 特定の座標に対するシーケンスを生成する</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs25', 52)" onmouseover="showTip(event, 'fs25', 52)" class="i">iterate</span> <span onmouseout="hideTip(event, 'fs26', 53)" onmouseover="showTip(event, 'fs26', 53)" class="i">x</span> <span onmouseout="hideTip(event, 'fs27', 54)" onmouseover="showTip(event, 'fs27', 54)" class="i">y</span> <span class="o">=</span>
  <span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs28', 55)" onmouseover="showTip(event, 'fs28', 55)" class="i">loop</span> <span onmouseout="hideTip(event, 'fs29', 56)" onmouseover="showTip(event, 'fs29', 56)" class="i">current</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs30', 57)" onmouseover="showTip(event, 'fs30', 57)" class="i">seq</span> { 
    <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs29', 58)" onmouseover="showTip(event, 'fs29', 58)" class="i">current</span>
    <span class="k">yield!</span> <span onmouseout="hideTip(event, 'fs28', 59)" onmouseover="showTip(event, 'fs28', 59)" class="i">loop</span> (<span onmouseout="hideTip(event, 'fs29', 60)" onmouseover="showTip(event, 'fs29', 60)" class="i">current</span> <span class="o">**</span> <span class="n">2.0</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs23', 61)" onmouseover="showTip(event, 'fs23', 61)" class="i">c</span>) }
  <span onmouseout="hideTip(event, 'fs28', 62)" onmouseover="showTip(event, 'fs28', 62)" class="i">loop</span> (<span onmouseout="hideTip(event, 'fs24', 63)" onmouseover="showTip(event, 'fs24', 63)" class="i">Complex</span>(<span onmouseout="hideTip(event, 'fs26', 64)" onmouseover="showTip(event, 'fs26', 64)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs27', 65)" onmouseover="showTip(event, 'fs27', 65)" class="i">y</span>))</pre>
</td>
</tr>
</table>

<p>この関数は(-1から+1までの)座標を引数にとり、画面上の1ピクセルに対する
シーケンスを生成します。
次に、絶対値が2以上になるまで(あるいは反復回数の最大値が特定の制限値を超えるまで)
反復回数を数える必要があります。
具体的には <code>Seq</code> モジュールの関数を以下のように使います：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs31', 66)" onmouseover="showTip(event, 'fs31', 66)" class="i">countIterations</span> <span onmouseout="hideTip(event, 'fs32', 67)" onmouseover="showTip(event, 'fs32', 67)" class="i">max</span> <span onmouseout="hideTip(event, 'fs26', 68)" onmouseover="showTip(event, 'fs26', 68)" class="i">x</span> <span onmouseout="hideTip(event, 'fs27', 69)" onmouseover="showTip(event, 'fs27', 69)" class="i">y</span> <span class="o">=</span> 
  <span onmouseout="hideTip(event, 'fs25', 70)" onmouseover="showTip(event, 'fs25', 70)" class="i">iterate</span> <span onmouseout="hideTip(event, 'fs26', 71)" onmouseover="showTip(event, 'fs26', 71)" class="i">x</span> <span onmouseout="hideTip(event, 'fs27', 72)" onmouseover="showTip(event, 'fs27', 72)" class="i">y</span>
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 73)" onmouseover="showTip(event, 'fs33', 73)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 74)" onmouseover="showTip(event, 'fs34', 74)" class="i">take</span> (<span onmouseout="hideTip(event, 'fs32', 75)" onmouseover="showTip(event, 'fs32', 75)" class="i">max</span> <span class="o">-</span> <span class="n">1</span>)
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 76)" onmouseover="showTip(event, 'fs33', 76)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs35', 77)" onmouseover="showTip(event, 'fs35', 77)" class="i">takeWhile</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs36', 78)" onmouseover="showTip(event, 'fs36', 78)" class="i">v</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs24', 79)" onmouseover="showTip(event, 'fs24', 79)" class="i">Complex</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs37', 80)" onmouseover="showTip(event, 'fs37', 80)" class="i">Abs</span>(<span onmouseout="hideTip(event, 'fs36', 81)" onmouseover="showTip(event, 'fs36', 81)" class="i">v</span>) <span class="o">&lt;</span> <span class="n">2.0</span>)
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs33', 82)" onmouseover="showTip(event, 'fs33', 82)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs38', 83)" onmouseover="showTip(event, 'fs38', 83)" class="i">length</span></pre>
</td>
</tr>
</table>

<p>まず、反復回数を特定の値に制限していて、
次に絶対値が小さい値を取得しつづけて、
最後にシーケンスの長さを計算しています。
(絶対値が2.0を超えると <code>takeWhile</code> 関数はシーケンスの生成を終了します。
また、 <code>length</code> の値は <code>max - 1</code> 以下になります。)
このコードは命令的な方法でも実装できます。
実際その方がパフォーマンスがいいかもしれません。
しかし今回の方法の方がジュリア集合の定義に則していることがはっきりわかります。</p>

<h3>カラーパレットの生成</h3>

<p>フラクタルを描画するためには、描画したいすべてのピクセルを走査して、
それぞれのピクセルに対して特定の <code>x</code> および <code>y</code> を引数に指定して
<code>countInterations</code> を呼び出し、反復回数に応じた色をパレットから
取得することになります。
北斎の絵画をフラクタルで表現するためには、このパレットを慎重に生成する必要があります。
アイデアとしては神奈川沖浪裏(The Great Wave off Kanagawa)で使われている
多数の色のグラデーションを作成します。</p>

<p>そこで、 <code>clr1 -- count --&gt; clr2</code> というような記述ができるように
2つのカスタムF#演算子を用意します。
この式は <code>clr1</code> から <code>clr2</code> まで、ステップ数 <code>count</code> で
グラデーションするような色を表します：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 2つの色を&#39;count&#39;ステップ数でグラデーションする</span>
<span class="k">let</span> (<span class="o">--</span>) <span onmouseout="hideTip(event, 'fs39', 84)" onmouseover="showTip(event, 'fs39', 84)" class="i">clr</span> <span onmouseout="hideTip(event, 'fs40', 85)" onmouseover="showTip(event, 'fs40', 85)" class="i">count</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs39', 86)" onmouseover="showTip(event, 'fs39', 86)" class="i">clr</span>, <span onmouseout="hideTip(event, 'fs40', 87)" onmouseover="showTip(event, 'fs40', 87)" class="i">count</span>
<span class="k">let</span> (<span class="o">--&gt;</span>) ((<span onmouseout="hideTip(event, 'fs41', 88)" onmouseover="showTip(event, 'fs41', 88)" class="i">r1</span>,<span onmouseout="hideTip(event, 'fs42', 89)" onmouseover="showTip(event, 'fs42', 89)" class="i">g1</span>,<span onmouseout="hideTip(event, 'fs43', 90)" onmouseover="showTip(event, 'fs43', 90)" class="i">b1</span>), <span onmouseout="hideTip(event, 'fs44', 91)" onmouseover="showTip(event, 'fs44', 91)" class="i">count</span>) (<span onmouseout="hideTip(event, 'fs45', 92)" onmouseover="showTip(event, 'fs45', 92)" class="i">r2</span>,<span onmouseout="hideTip(event, 'fs46', 93)" onmouseover="showTip(event, 'fs46', 93)" class="i">g2</span>,<span onmouseout="hideTip(event, 'fs47', 94)" onmouseover="showTip(event, 'fs47', 94)" class="i">b2</span>) <span class="o">=</span> [
  <span class="k">for</span> <span onmouseout="hideTip(event, 'fs48', 95)" onmouseover="showTip(event, 'fs48', 95)" class="i">c</span> <span class="k">in</span> <span class="n">0</span> <span class="o">..</span> <span onmouseout="hideTip(event, 'fs44', 96)" onmouseover="showTip(event, 'fs44', 96)" class="i">count</span> <span class="o">-</span> <span class="n">1</span> <span class="k">-&gt;</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs49', 97)" onmouseover="showTip(event, 'fs49', 97)" class="i">k</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs50', 98)" onmouseover="showTip(event, 'fs50', 98)" class="i">float</span> <span onmouseout="hideTip(event, 'fs48', 99)" onmouseover="showTip(event, 'fs48', 99)" class="i">c</span> <span class="o">/</span> <span onmouseout="hideTip(event, 'fs50', 100)" onmouseover="showTip(event, 'fs50', 100)" class="i">float</span> <span onmouseout="hideTip(event, 'fs44', 101)" onmouseover="showTip(event, 'fs44', 101)" class="i">count</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs51', 102)" onmouseover="showTip(event, 'fs51', 102)" class="i">mid</span> <span onmouseout="hideTip(event, 'fs52', 103)" onmouseover="showTip(event, 'fs52', 103)" class="i">v1</span> <span onmouseout="hideTip(event, 'fs53', 104)" onmouseover="showTip(event, 'fs53', 104)" class="i">v2</span> <span class="o">=</span> 
      <span onmouseout="hideTip(event, 'fs54', 105)" onmouseover="showTip(event, 'fs54', 105)" class="i">int</span> (<span onmouseout="hideTip(event, 'fs50', 106)" onmouseover="showTip(event, 'fs50', 106)" class="i">float</span> <span onmouseout="hideTip(event, 'fs52', 107)" onmouseover="showTip(event, 'fs52', 107)" class="i">v1</span> <span class="o">+</span> ((<span onmouseout="hideTip(event, 'fs50', 108)" onmouseover="showTip(event, 'fs50', 108)" class="i">float</span> <span onmouseout="hideTip(event, 'fs53', 109)" onmouseover="showTip(event, 'fs53', 109)" class="i">v2</span>) <span class="o">-</span> (<span onmouseout="hideTip(event, 'fs50', 110)" onmouseover="showTip(event, 'fs50', 110)" class="i">float</span> <span onmouseout="hideTip(event, 'fs52', 111)" onmouseover="showTip(event, 'fs52', 111)" class="i">v1</span>)) <span class="o">*</span> <span onmouseout="hideTip(event, 'fs49', 112)" onmouseover="showTip(event, 'fs49', 112)" class="i">k</span>) 
    <span onmouseout="hideTip(event, 'fs55', 113)" onmouseover="showTip(event, 'fs55', 113)" class="i">Color</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs56', 114)" onmouseover="showTip(event, 'fs56', 114)" class="i">FromArgb</span>(<span onmouseout="hideTip(event, 'fs51', 115)" onmouseover="showTip(event, 'fs51', 115)" class="i">mid</span> <span onmouseout="hideTip(event, 'fs41', 116)" onmouseover="showTip(event, 'fs41', 116)" class="i">r1</span> <span onmouseout="hideTip(event, 'fs45', 117)" onmouseover="showTip(event, 'fs45', 117)" class="i">r2</span>, <span onmouseout="hideTip(event, 'fs51', 118)" onmouseover="showTip(event, 'fs51', 118)" class="i">mid</span> <span onmouseout="hideTip(event, 'fs42', 119)" onmouseover="showTip(event, 'fs42', 119)" class="i">g1</span> <span onmouseout="hideTip(event, 'fs46', 120)" onmouseover="showTip(event, 'fs46', 120)" class="i">g2</span>, <span onmouseout="hideTip(event, 'fs51', 121)" onmouseover="showTip(event, 'fs51', 121)" class="i">mid</span> <span onmouseout="hideTip(event, 'fs43', 122)" onmouseover="showTip(event, 'fs43', 122)" class="i">b1</span> <span onmouseout="hideTip(event, 'fs47', 123)" onmouseover="showTip(event, 'fs47', 123)" class="i">b2</span>) ]</pre>
</td>
</tr>
</table>

<p><code>--</code> 演算子はタプルを生成する構文的なトリックにすぎません。
式は <code>(clr1 -- count) --&gt; clr2</code> というように解析されるので、
2番目の演算子は初期色とステップ数を受け取って、
グラデーションを構成する色のリストを生成することができます。</p>

<p>そうすると配列式と <code>yield!</code> を使って、各グラデーションを組み合わせることで
うまい具合にパレットを生成することができます。
まず空色から始めて、(水を表す)青系のグラデーションをいくつか生成し、
最後に白系のグラデーションを追加します：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 北斎の作品で使われているカラーパレット</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs57', 124)" onmouseover="showTip(event, 'fs57', 124)" class="i">palette</span> <span class="o">=</span> 
  [| <span class="c">// 3つの空の色と、ライトブルーまでのグラデーション</span>
     <span class="k">yield!</span> (<span class="n">245</span>,<span class="n">219</span>,<span class="n">184</span>) <span class="o">--</span><span class="n">3</span><span class="o">--&gt;</span> (<span class="n">245</span>,<span class="n">219</span>,<span class="n">184</span>) 
     <span class="k">yield!</span> (<span class="n">245</span>,<span class="n">219</span>,<span class="n">184</span>) <span class="o">--</span><span class="n">4</span><span class="o">--&gt;</span> (<span class="n">138</span>,<span class="n">173</span>,<span class="n">179</span>)
     <span class="c">// ダークブルーまでのグラデーションと、ミディアムダークブルーまでのグラデーション</span>
     <span class="k">yield!</span> (<span class="n">138</span>,<span class="n">173</span>,<span class="n">179</span>) <span class="o">--</span><span class="n">4</span><span class="o">--&gt;</span> (<span class="n">2</span>,<span class="n">12</span>,<span class="n">74</span>)
     <span class="k">yield!</span> (<span class="n">2</span>,<span class="n">12</span>,<span class="n">74</span>)     <span class="o">--</span><span class="n">4</span><span class="o">--&gt;</span> (<span class="n">61</span>,<span class="n">102</span>,<span class="n">130</span>)
     <span class="c">// 波の色までのグラデーションと、ライトブルーまで、そして波の色に戻るまでのグラデーション</span>
     <span class="k">yield!</span> (<span class="n">61</span>,<span class="n">102</span>,<span class="n">130</span>)  <span class="o">--</span> <span class="n">8</span><span class="o">--&gt;</span> (<span class="n">249</span>,<span class="n">243</span>,<span class="n">221</span>) 
     <span class="k">yield!</span> (<span class="n">249</span>,<span class="n">243</span>,<span class="n">221</span>) <span class="o">--</span><span class="n">32</span><span class="o">--&gt;</span> (<span class="n">138</span>,<span class="n">173</span>,<span class="n">179</span>) 
     <span class="k">yield!</span> (<span class="n">138</span>,<span class="n">173</span>,<span class="n">179</span>) <span class="o">--</span><span class="n">32</span><span class="o">--&gt;</span> (<span class="n">61</span>,<span class="n">102</span>,<span class="n">130</span>) |]</pre>
</td>
</tr>
</table>

<h3>フラクタルの描画</h3>

<p>さてこれでフラクタルを描画するためのものがすべて揃いました。
最初のバージョンをシンプルなものにするために、まずはWindowsフォームと
<code>System.Drawing</code> の <code>Bitmap</code> を使うことにしましょう。
フォームを作成するコードについては省略します
(ただし <a href="https://github.com/tpetricek/TomaspNet.Website/tree/master/source/blog/2013">GitHub上に完全なソースコード</a> が置いてあります)。</p>

<p>フォームとビットマップを作成した後は、ビットマップの各ピクセルを走査して、
(パレットの長さを最大値として)反復の回数を数えて、
その値をインデックスにしてパレットから色を取得します：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span id="fst58" onmouseout="hideTip(event, 'fs58', 125)" onmouseover="showTip(event, 'fs58', 125, document.getElementById('fst58'))" class="omitted">(PictureBoxを持ったフォームを作成)</span>

<span class="c">// 描画する領域を指定する</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs59', 126)" onmouseover="showTip(event, 'fs59', 126)" class="i">w</span> <span class="o">=</span> <span class="o">-</span><span class="n">0.4</span>, <span class="n">0.4</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs60', 127)" onmouseover="showTip(event, 'fs60', 127)" class="i">h</span> <span class="o">=</span> <span class="o">-</span><span class="n">0.95</span>, <span class="o">-</span><span class="n">0.35</span>

<span class="c">// フォームのサイズに一致するBitmapを作成する</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs61', 128)" onmouseover="showTip(event, 'fs61', 128)" class="i">width</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs50', 129)" onmouseover="showTip(event, 'fs50', 129)" class="i">float</span> <span onmouseout="hideTip(event, 'fs62', 130)" onmouseover="showTip(event, 'fs62', 130)" class="i">f</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 131)" onmouseover="showTip(event, 'fs63', 131)" class="i">ClientSize</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs64', 132)" onmouseover="showTip(event, 'fs64', 132)" class="i">Width</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs65', 133)" onmouseover="showTip(event, 'fs65', 133)" class="i">height</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs50', 134)" onmouseover="showTip(event, 'fs50', 134)" class="i">float</span> <span onmouseout="hideTip(event, 'fs62', 135)" onmouseover="showTip(event, 'fs62', 135)" class="i">f</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 136)" onmouseover="showTip(event, 'fs63', 136)" class="i">ClientSize</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs66', 137)" onmouseover="showTip(event, 'fs66', 137)" class="i">Height</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs67', 138)" onmouseover="showTip(event, 'fs67', 138)" class="i">bmp</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs68', 139)" onmouseover="showTip(event, 'fs68', 139)" class="i">Bitmap</span>(<span onmouseout="hideTip(event, 'fs62', 140)" onmouseover="showTip(event, 'fs62', 140)" class="i">f</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 141)" onmouseover="showTip(event, 'fs63', 141)" class="i">ClientSize</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs64', 142)" onmouseover="showTip(event, 'fs64', 142)" class="i">Width</span>, <span onmouseout="hideTip(event, 'fs62', 143)" onmouseover="showTip(event, 'fs62', 143)" class="i">f</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 144)" onmouseover="showTip(event, 'fs63', 144)" class="i">ClientSize</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs66', 145)" onmouseover="showTip(event, 'fs66', 145)" class="i">Height</span>)

<span class="c">// 各ピクセルに対して、指定の領域になるよう変形した後、</span>
<span class="c">// countInterations とパレットを使って色を選択する</span>
<span class="k">for</span> <span onmouseout="hideTip(event, 'fs69', 146)" onmouseover="showTip(event, 'fs69', 146)" class="i">x</span> <span class="k">in</span> <span class="n">0</span> <span class="o">..</span> <span onmouseout="hideTip(event, 'fs67', 147)" onmouseover="showTip(event, 'fs67', 147)" class="i">bmp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs70', 148)" onmouseover="showTip(event, 'fs70', 148)" class="i">Width</span> <span class="o">-</span> <span class="n">1</span> <span class="k">do</span>
  <span class="k">for</span> <span onmouseout="hideTip(event, 'fs71', 149)" onmouseover="showTip(event, 'fs71', 149)" class="i">y</span> <span class="k">in</span> <span class="n">0</span> <span class="o">..</span> <span onmouseout="hideTip(event, 'fs67', 150)" onmouseover="showTip(event, 'fs67', 150)" class="i">bmp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs72', 151)" onmouseover="showTip(event, 'fs72', 151)" class="i">Height</span> <span class="o">-</span> <span class="n">1</span> <span class="k">do</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs73', 152)" onmouseover="showTip(event, 'fs73', 152)" class="i">x&#39;</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs50', 153)" onmouseover="showTip(event, 'fs50', 153)" class="i">float</span> <span onmouseout="hideTip(event, 'fs69', 154)" onmouseover="showTip(event, 'fs69', 154)" class="i">x</span> <span class="o">/</span> <span onmouseout="hideTip(event, 'fs61', 155)" onmouseover="showTip(event, 'fs61', 155)" class="i">width</span> <span class="o">*</span> (<span onmouseout="hideTip(event, 'fs74', 156)" onmouseover="showTip(event, 'fs74', 156)" class="i">snd</span> <span onmouseout="hideTip(event, 'fs59', 157)" onmouseover="showTip(event, 'fs59', 157)" class="i">w</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs75', 158)" onmouseover="showTip(event, 'fs75', 158)" class="i">fst</span> <span onmouseout="hideTip(event, 'fs59', 159)" onmouseover="showTip(event, 'fs59', 159)" class="i">w</span>)) <span class="o">+</span> <span onmouseout="hideTip(event, 'fs75', 160)" onmouseover="showTip(event, 'fs75', 160)" class="i">fst</span> <span onmouseout="hideTip(event, 'fs59', 161)" onmouseover="showTip(event, 'fs59', 161)" class="i">w</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs76', 162)" onmouseover="showTip(event, 'fs76', 162)" class="i">y&#39;</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs50', 163)" onmouseover="showTip(event, 'fs50', 163)" class="i">float</span> <span onmouseout="hideTip(event, 'fs71', 164)" onmouseover="showTip(event, 'fs71', 164)" class="i">y</span> <span class="o">/</span> <span onmouseout="hideTip(event, 'fs65', 165)" onmouseover="showTip(event, 'fs65', 165)" class="i">height</span> <span class="o">*</span> (<span onmouseout="hideTip(event, 'fs74', 166)" onmouseover="showTip(event, 'fs74', 166)" class="i">snd</span> <span onmouseout="hideTip(event, 'fs60', 167)" onmouseover="showTip(event, 'fs60', 167)" class="i">h</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs75', 168)" onmouseover="showTip(event, 'fs75', 168)" class="i">fst</span> <span onmouseout="hideTip(event, 'fs60', 169)" onmouseover="showTip(event, 'fs60', 169)" class="i">h</span>)) <span class="o">+</span> <span onmouseout="hideTip(event, 'fs75', 170)" onmouseover="showTip(event, 'fs75', 170)" class="i">fst</span> <span onmouseout="hideTip(event, 'fs60', 171)" onmouseover="showTip(event, 'fs60', 171)" class="i">h</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs77', 172)" onmouseover="showTip(event, 'fs77', 172)" class="i">it</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs31', 173)" onmouseover="showTip(event, 'fs31', 173)" class="i">countIterations</span> <span onmouseout="hideTip(event, 'fs57', 174)" onmouseover="showTip(event, 'fs57', 174)" class="i">palette</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs78', 175)" onmouseover="showTip(event, 'fs78', 175)" class="i">Length</span> <span onmouseout="hideTip(event, 'fs73', 176)" onmouseover="showTip(event, 'fs73', 176)" class="i">x&#39;</span> <span onmouseout="hideTip(event, 'fs76', 177)" onmouseover="showTip(event, 'fs76', 177)" class="i">y&#39;</span> 
    <span onmouseout="hideTip(event, 'fs67', 178)" onmouseover="showTip(event, 'fs67', 178)" class="i">bmp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs79', 179)" onmouseover="showTip(event, 'fs79', 179)" class="i">SetPixel</span>(<span onmouseout="hideTip(event, 'fs69', 180)" onmouseover="showTip(event, 'fs69', 180)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs71', 181)" onmouseover="showTip(event, 'fs71', 181)" class="i">y</span>, <span onmouseout="hideTip(event, 'fs57', 182)" onmouseover="showTip(event, 'fs57', 182)" class="i">palette</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs77', 183)" onmouseover="showTip(event, 'fs77', 183)" class="i">it</span>])
<span onmouseout="hideTip(event, 'fs80', 184)" onmouseover="showTip(event, 'fs80', 184)" class="i">i</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs81', 185)" onmouseover="showTip(event, 'fs81', 185)" class="i">Image</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs67', 186)" onmouseover="showTip(event, 'fs67', 186)" class="i">bmp</span></pre>
</td>
</tr>
</table>

<p>引数 <code>w</code> と <code>h</code> はそれぞれ描画するフラクタルの部分を表すタプルです。
これらの値を <code>-2.0, 2.0</code> と <code>-1.5, 1.5</code> に変更すればフラクタル全体が表示されます。
ここでは以下のような素敵な絵が表示されるように、フラクタルの特別な場所を
選択しています：</p>

<div style="text-align:center;padding-right:40px">
<img src="compared.jpg" style="margin-left:auto;margin-right:auto;" />
</div>

<h2>Fun(Script)の追加</h2>

<p>さてこれでフラクタルを描画するコードが出来上がったわけですが、
Windowsフォームプロジェクトを新しく作成することなしに、
ライブで実行される様子を皆さんも見てみたいのではないかと思います。
幸いにも私たちはF#コードをJavaScriptに変換する <a href="http://funscript.info/">FunScript</a>
というコンパイラが使えるわけなので、HTML5の <code>&lt;canvas&gt;</code> 要素に
フラクタルを描画するようにできます。
FunScriptには既にHTML5でマンデルブロ集合を描画するようなサンプルがあるので、
これもまた実に簡単に実装できます。
ただし重要なのは、これまで作成してきたコードを単に再利用することができる、という点です。
詳細をすべて説明するスペースもないので、重要なリンクをいくつか紹介するにとどめます：</p>

<ul>
<li>FunScriptの詳細については <a href="http://funscript.info">プロジェクトのホームページ</a> を参照してください。</li>
<li><a href="https://github.com/tpetricek/FunScript/tree/master/Examples/Hokusai">FunScriptバージョンのソースコード</a>
は私のGitHubにあります。</li>
<li>そして、 <a href="hokusai.html">実際にコードが動作しているバージョン</a> を見ることもできます。</li>
</ul>

<p>まず描画関数を変更するところから見ていきましょう。
実際にJavaScriptで動作しているバージョンをみてもわかるように、
描画処理がやや遅いため、列を描画する毎に表示している絵を更新しています。
(元々のコードを動的型付けであるJavaScriptへとコピーしているだけなので、
パフォーマンスの低下は想定通りです。
命令的なスタイルに書き直せばコードのパフォーマンスを改善できるでしょう。)</p>

<p>しかし描画関数をF#の <code>async</code> ワークフローでラップして、1列描画が終わる度に
<code>Async.Sleep</code> を呼んで絵を更新するようにすればかなりいい感じのコードになります：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">/// 列毎にスリープしつつ、非同期的にフラクタルを描画する</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs82', 187)" onmouseover="showTip(event, 'fs82', 187)" class="i">render</span> () <span class="o">=</span> <span onmouseout="hideTip(event, 'fs83', 188)" onmouseover="showTip(event, 'fs83', 188)" class="i">async</span> {
  <span class="c">// &lt;canvas&gt; 要素を取得して、描画する画像を作成する</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs84', 189)" onmouseover="showTip(event, 'fs84', 189)" class="i">canv</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs85', 190)" onmouseover="showTip(event, 'fs85', 190)" class="i">HTMLCanvasElement</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs86', 191)" onmouseover="showTip(event, 'fs86', 191)" class="i">Globals</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs87', 192)" onmouseover="showTip(event, 'fs87', 192)" class="i">document</span><span class="o">?</span><span class="i">canvas</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs88', 193)" onmouseover="showTip(event, 'fs88', 193)" class="i">ctx</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs84', 194)" onmouseover="showTip(event, 'fs84', 194)" class="i">canv</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs89', 195)" onmouseover="showTip(event, 'fs89', 195)" class="i">getContext_2d</span>()
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs90', 196)" onmouseover="showTip(event, 'fs90', 196)" class="i">img</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 197)" onmouseover="showTip(event, 'fs88', 197)" class="i">ctx</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs91', 198)" onmouseover="showTip(event, 'fs91', 198)" class="i">createImageData</span>(<span onmouseout="hideTip(event, 'fs50', 199)" onmouseover="showTip(event, 'fs50', 199)" class="i">float</span> <span onmouseout="hideTip(event, 'fs61', 200)" onmouseover="showTip(event, 'fs61', 200)" class="i">width</span>, <span onmouseout="hideTip(event, 'fs50', 201)" onmouseover="showTip(event, 'fs50', 201)" class="i">float</span> <span onmouseout="hideTip(event, 'fs65', 202)" onmouseover="showTip(event, 'fs65', 202)" class="i">height</span>)
    
  <span class="c">// 各ピクセルに対して、特定の領域になるよう変形した後、</span>
  <span class="c">// countInterations とパレットを使って色を選択する</span>
  <span class="k">for</span> <span onmouseout="hideTip(event, 'fs92', 203)" onmouseover="showTip(event, 'fs92', 203)" class="i">x</span> <span class="k">in</span> <span class="n">0</span> <span class="o">..</span> <span onmouseout="hideTip(event, 'fs54', 204)" onmouseover="showTip(event, 'fs54', 204)" class="i">int</span> <span onmouseout="hideTip(event, 'fs61', 205)" onmouseover="showTip(event, 'fs61', 205)" class="i">width</span> <span class="o">-</span> <span class="n">1</span> <span class="k">do</span>
    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs93', 206)" onmouseover="showTip(event, 'fs93', 206)" class="i">y</span> <span class="k">in</span> <span class="n">0</span> <span class="o">..</span> <span onmouseout="hideTip(event, 'fs54', 207)" onmouseover="showTip(event, 'fs54', 207)" class="i">int</span> <span onmouseout="hideTip(event, 'fs65', 208)" onmouseover="showTip(event, 'fs65', 208)" class="i">height</span> <span class="o">-</span> <span class="n">1</span> <span class="k">do</span> 
      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs73', 209)" onmouseover="showTip(event, 'fs73', 209)" class="i">x&#39;</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs50', 210)" onmouseover="showTip(event, 'fs50', 210)" class="i">float</span> <span onmouseout="hideTip(event, 'fs92', 211)" onmouseover="showTip(event, 'fs92', 211)" class="i">x</span> <span class="o">/</span> <span onmouseout="hideTip(event, 'fs61', 212)" onmouseover="showTip(event, 'fs61', 212)" class="i">width</span> <span class="o">*</span> (<span onmouseout="hideTip(event, 'fs74', 213)" onmouseover="showTip(event, 'fs74', 213)" class="i">snd</span> <span onmouseout="hideTip(event, 'fs59', 214)" onmouseover="showTip(event, 'fs59', 214)" class="i">w</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs75', 215)" onmouseover="showTip(event, 'fs75', 215)" class="i">fst</span> <span onmouseout="hideTip(event, 'fs59', 216)" onmouseover="showTip(event, 'fs59', 216)" class="i">w</span>)) <span class="o">+</span> <span onmouseout="hideTip(event, 'fs75', 217)" onmouseover="showTip(event, 'fs75', 217)" class="i">fst</span> <span onmouseout="hideTip(event, 'fs59', 218)" onmouseover="showTip(event, 'fs59', 218)" class="i">w</span>
      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs76', 219)" onmouseover="showTip(event, 'fs76', 219)" class="i">y&#39;</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs50', 220)" onmouseover="showTip(event, 'fs50', 220)" class="i">float</span> <span onmouseout="hideTip(event, 'fs93', 221)" onmouseover="showTip(event, 'fs93', 221)" class="i">y</span> <span class="o">/</span> <span onmouseout="hideTip(event, 'fs65', 222)" onmouseover="showTip(event, 'fs65', 222)" class="i">height</span> <span class="o">*</span> (<span onmouseout="hideTip(event, 'fs74', 223)" onmouseover="showTip(event, 'fs74', 223)" class="i">snd</span> <span onmouseout="hideTip(event, 'fs60', 224)" onmouseover="showTip(event, 'fs60', 224)" class="i">h</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs75', 225)" onmouseover="showTip(event, 'fs75', 225)" class="i">fst</span> <span onmouseout="hideTip(event, 'fs60', 226)" onmouseover="showTip(event, 'fs60', 226)" class="i">h</span>)) <span class="o">+</span> <span onmouseout="hideTip(event, 'fs75', 227)" onmouseover="showTip(event, 'fs75', 227)" class="i">fst</span> <span onmouseout="hideTip(event, 'fs60', 228)" onmouseover="showTip(event, 'fs60', 228)" class="i">h</span>
      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs77', 229)" onmouseover="showTip(event, 'fs77', 229)" class="i">it</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs31', 230)" onmouseover="showTip(event, 'fs31', 230)" class="i">countIterations</span> <span onmouseout="hideTip(event, 'fs94', 231)" onmouseover="showTip(event, 'fs94', 231)" class="i">palette</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs78', 232)" onmouseover="showTip(event, 'fs78', 232)" class="i">Length</span> <span onmouseout="hideTip(event, 'fs73', 233)" onmouseover="showTip(event, 'fs73', 233)" class="i">x&#39;</span> <span onmouseout="hideTip(event, 'fs76', 234)" onmouseover="showTip(event, 'fs76', 234)" class="i">y&#39;</span> 
      <span onmouseout="hideTip(event, 'fs95', 235)" onmouseover="showTip(event, 'fs95', 235)" class="i">setPixel</span> <span onmouseout="hideTip(event, 'fs90', 236)" onmouseover="showTip(event, 'fs90', 236)" class="i">img</span> <span onmouseout="hideTip(event, 'fs92', 237)" onmouseover="showTip(event, 'fs92', 237)" class="i">x</span> <span onmouseout="hideTip(event, 'fs93', 238)" onmouseover="showTip(event, 'fs93', 238)" class="i">y</span> <span onmouseout="hideTip(event, 'fs61', 239)" onmouseover="showTip(event, 'fs61', 239)" class="i">width</span> <span onmouseout="hideTip(event, 'fs94', 240)" onmouseover="showTip(event, 'fs94', 240)" class="i">palette</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs77', 241)" onmouseover="showTip(event, 'fs77', 241)" class="i">it</span>]

    <span class="c">// ノンブロッキングなスリープを追加＆フラクタルを更新</span>
    <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs96', 242)" onmouseover="showTip(event, 'fs96', 242)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs97', 243)" onmouseover="showTip(event, 'fs97', 243)" class="i">Sleep</span>(<span class="n">1</span>)
    <span onmouseout="hideTip(event, 'fs88', 244)" onmouseover="showTip(event, 'fs88', 244)" class="i">ctx</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs98', 245)" onmouseover="showTip(event, 'fs98', 245)" class="i">putImageData</span>(<span onmouseout="hideTip(event, 'fs90', 246)" onmouseover="showTip(event, 'fs90', 246)" class="i">img</span>, <span class="n">0.0</span>, <span class="n">0.0</span>) }</pre>
</td>
</tr>
</table>

<p>このコードは先ほどのものとほとんど同じです。
なおFunScriptにはJavaScriptライブラリのほとんどの機能に対する型付きのラッパーがあるため、
コード中の変数はいずれも静的に型付けされます(つまり <code>canv</code> は <code>HTMLCanvasElement</code> 型で、
描画コンテキストを取得する <code>getContext_2d</code> メソッドなどを持ちます)。
また、1つのピクセルに色を設定するためのヘルパー関数 <code>setPixel</code> や、
IDによってHTML要素を得るための動的検索演算子 <code>?</code> を使っています
(いずれも次の節で紹介します)。
描画を開始するにはイベントハンドラをセットアップして <code>StartImmediate</code> メソッドを呼び出します：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// 描画を開始するため、ボタンにイベントハンドラを設定する</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs99', 247)" onmouseover="showTip(event, 'fs99', 247)" class="i">go</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs100', 248)" onmouseover="showTip(event, 'fs100', 248)" class="i">HTMLButtonElement</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs86', 249)" onmouseover="showTip(event, 'fs86', 249)" class="i">Globals</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs87', 250)" onmouseover="showTip(event, 'fs87', 250)" class="i">document</span><span class="o">?</span><span onmouseout="hideTip(event, 'fs99', 251)" onmouseover="showTip(event, 'fs99', 251)" class="i">go</span>
<span onmouseout="hideTip(event, 'fs99', 252)" onmouseover="showTip(event, 'fs99', 252)" class="i">go</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs101', 253)" onmouseover="showTip(event, 'fs101', 253)" class="i">addEventListener_click</span>(<span class="k">fun</span> _ <span class="k">-&gt;</span> 
  <span onmouseout="hideTip(event, 'fs82', 254)" onmouseover="showTip(event, 'fs82', 254)" class="i">render</span>() <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs96', 255)" onmouseover="showTip(event, 'fs96', 255)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs102', 256)" onmouseover="showTip(event, 'fs102', 256)" class="i">StartImmediate</span>; <span class="k">null</span>)  </pre>
</td>
</tr>
</table>

<p>ここで使っている2つのヘルパー関数もかなり単純なものです。
<code>setPixel</code> は <code>ImageData</code> 配列のオフセットを計算してR,G,Bのコンポーネント
(とアルファチャネル)を設定しているだけです。
動的演算子も、 <code>getElementById</code> を呼んで、期待される型に要素をキャストして返しているだけです：</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">/// ImageDataにあるピクセルの値を特定の色に設定する</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs103', 257)" onmouseover="showTip(event, 'fs103', 257)" class="i">setPixel</span> (<span onmouseout="hideTip(event, 'fs90', 258)" onmouseover="showTip(event, 'fs90', 258)" class="i">img</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs104', 259)" onmouseover="showTip(event, 'fs104', 259)" class="i">ImageData</span>) <span onmouseout="hideTip(event, 'fs92', 260)" onmouseover="showTip(event, 'fs92', 260)" class="i">x</span> <span onmouseout="hideTip(event, 'fs93', 261)" onmouseover="showTip(event, 'fs93', 261)" class="i">y</span> <span onmouseout="hideTip(event, 'fs105', 262)" onmouseover="showTip(event, 'fs105', 262)" class="i">width</span> (<span onmouseout="hideTip(event, 'fs106', 263)" onmouseover="showTip(event, 'fs106', 263)" class="i">r</span>, <span onmouseout="hideTip(event, 'fs107', 264)" onmouseover="showTip(event, 'fs107', 264)" class="i">g</span>, <span onmouseout="hideTip(event, 'fs108', 265)" onmouseover="showTip(event, 'fs108', 265)" class="i">b</span>) <span class="o">=</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs109', 266)" onmouseover="showTip(event, 'fs109', 266)" class="i">index</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs92', 267)" onmouseover="showTip(event, 'fs92', 267)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs93', 268)" onmouseover="showTip(event, 'fs93', 268)" class="i">y</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs54', 269)" onmouseover="showTip(event, 'fs54', 269)" class="i">int</span> <span onmouseout="hideTip(event, 'fs105', 270)" onmouseover="showTip(event, 'fs105', 270)" class="i">width</span>) <span class="o">*</span> <span class="n">4</span>
  <span onmouseout="hideTip(event, 'fs90', 271)" onmouseover="showTip(event, 'fs90', 271)" class="i">img</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs110', 272)" onmouseover="showTip(event, 'fs110', 272)" class="i">data</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs109', 273)" onmouseover="showTip(event, 'fs109', 273)" class="i">index</span><span class="o">+</span><span class="n">0</span>] <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs106', 274)" onmouseover="showTip(event, 'fs106', 274)" class="i">r</span>
  <span onmouseout="hideTip(event, 'fs90', 275)" onmouseover="showTip(event, 'fs90', 275)" class="i">img</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs110', 276)" onmouseover="showTip(event, 'fs110', 276)" class="i">data</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs109', 277)" onmouseover="showTip(event, 'fs109', 277)" class="i">index</span><span class="o">+</span><span class="n">1</span>] <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs107', 278)" onmouseover="showTip(event, 'fs107', 278)" class="i">g</span>
  <span onmouseout="hideTip(event, 'fs90', 279)" onmouseover="showTip(event, 'fs90', 279)" class="i">img</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs110', 280)" onmouseover="showTip(event, 'fs110', 280)" class="i">data</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs109', 281)" onmouseover="showTip(event, 'fs109', 281)" class="i">index</span><span class="o">+</span><span class="n">2</span>] <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs108', 282)" onmouseover="showTip(event, 'fs108', 282)" class="i">b</span>
  <span onmouseout="hideTip(event, 'fs90', 283)" onmouseover="showTip(event, 'fs90', 283)" class="i">img</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs110', 284)" onmouseover="showTip(event, 'fs110', 284)" class="i">data</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs109', 285)" onmouseover="showTip(event, 'fs109', 285)" class="i">index</span><span class="o">+</span><span class="n">3</span>] <span class="o">&lt;-</span> <span class="n">255.0</span>

<span class="c">/// IDで見つかるHTML要素を返す動的演算子</span>
<span class="k">let</span> (<span class="o">?</span>) (<span onmouseout="hideTip(event, 'fs111', 286)" onmouseover="showTip(event, 'fs111', 286)" class="i">doc</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs112', 287)" onmouseover="showTip(event, 'fs112', 287)" class="i">Document</span>) <span onmouseout="hideTip(event, 'fs113', 288)" onmouseover="showTip(event, 'fs113', 288)" class="i">name</span> <span class="o">:</span><span class="o">&#39;</span><span class="i">R</span> <span class="o">=</span>  
  <span onmouseout="hideTip(event, 'fs111', 289)" onmouseover="showTip(event, 'fs111', 289)" class="i">doc</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs114', 290)" onmouseover="showTip(event, 'fs114', 290)" class="i">getElementById</span>(<span onmouseout="hideTip(event, 'fs113', 291)" onmouseover="showTip(event, 'fs113', 291)" class="i">name</span>) <span class="o">:?&gt;</span> <span class="o">&#39;</span><span class="i">R</span></pre>
</td>
</tr>
</table>

<h2>まとめ</h2>

<p>まず最初に、私がこの記事を楽しんで書くことが出来たのと同じように、
皆さんが私の記事を楽しく読むことが出来ていますように。
そしてとても素敵なクリスマスシーズンを皆さんが過ごせていますように！</p>

<p>冒頭でも触れましたが、私はここ最近F#コミュニティで開発されている
興味深いライブラリを紹介したいと思っていて、また日本に関連のあるテーマと
絡めて紹介できたらいいなと思っていました。
最初は <a href="http://fsharp.github.io/FSharp.Data/">F# Data</a> 、
特にFreebase型プロバイダを使って日本の画家とそれぞれの作品のリストを取得しました。</p>

<p>次に北斎を題材にして、適切に選択したパレットを使ったジュリア集合で
彼の作である神奈川沖浪裏の再作成に挑戦しました。
最初のバージョンでは、Windowsフォームを使って描画しました。
Webブラウザ上で直接実行できるコードにするためには、
FunScriptを使ってF#をJavaScriptへと変換しました。
ここでは既存のコードを変更する必要がほとんどありませんでした。
フラクタルの描画進捗を確認できるようにするには、
(ボーナスとして)非同期ワークフローを追加するだけでした。</p>

<div class="tip" id="fs1">namespace FSharp</div>
<div class="tip" id="fs2">namespace FSharp.Data</div>
<div class="tip" id="fs3">namespace System</div>
<div class="tip" id="fs4">namespace System.Linq</div>
<div class="tip" id="fs5">type FreebaseData = FreebaseDataProvider&lt;...&gt;<br /><br />Full name: Japan-advent-art_.FreebaseData</div>
<div class="tip" id="fs6">type FreebaseDataProvider<br /><br />Full name: FSharp.Data.FreebaseDataProvider<br /><em><br /><br />&lt;summary&gt;Typed representation of Freebase data with additional configuration parameters&lt;/summary&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Key&#39;&gt;The API key for the MQL metadata service (default: none)&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;ServiceUrl&#39;&gt;The service URL for the MQL metadata service (default: https://www.googleapis.com/freebase/v1)&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;NumIndividuals&#39;&gt;The maximum number of sample individuals for each Freebase type (default: 1000)&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;UseUnitsOfMeasure&#39;&gt;Use the unit-of-measure annotations from the data source metadata (default: true)&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Pluralize&#39;&gt;Use adhoc rules to pluralize the names of types when forming names of collections (default: true)&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;SnapshotDate&#39;&gt;Use a snapshot of the web data store at the given date and/or time in ISO8601 format, e.g., 2012-01-18, 2012-09-15T21:11:32. A value of &#39;now&#39; indicates the compile time of the code. (default: no snapshot)&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;LocalCache&#39;&gt;Use a persistent local cache for schema requests. Also provides the default for whether a persistent local cache is used at runtime. A per-session cache is always used for schema data but it will not persist if this is set to &#39;false&#39;. (default: true)&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;AllowLocalQueryEvaluation&#39;&gt;Allow local evalution of some parts of a query. If false, then an exception will be raised if a query can&#39;t be evaluated fully on the server. If true, data sets may be implicitly brought to the client for processing. (default: true)&lt;/param&gt;</em></div>
<div class="tip" id="fs7">&quot;AIzaSyCEgJTvxPjj6zqLKTK06nPYkUooSO1tB0w&quot;</div>
<div class="tip" id="fs8">val fb : FreebaseDataProvider&lt;...&gt;.ServiceTypes.FreebaseService<br /><br />Full name: Japan-advent-art_.fb</div>
<div class="tip" id="fs9">Multiple items<br />FreebaseDataProvider&lt;...&gt;.GetDataContext() : FreebaseDataProvider&lt;...&gt;.ServiceTypes.FreebaseService<br /><br />--------------------<br />FreebaseData.GetDataContext() : FreebaseData.ServiceTypes.FreebaseService</div>
<div class="tip" id="fs10">val art : obj<br /><br />Full name: Japan-advent-art_.art</div>
<div class="tip" id="fs11">val ldv : obj<br /><br />Full name: Japan-advent-art_.ldv</div>
<div class="tip" id="fs12">val artists : IQueryable&lt;obj&gt;<br /><br />Full name: Japan-advent-art_.artists</div>
<div class="tip" id="fs13">val query : Linq.QueryBuilder<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.query</div>
<div class="tip" id="fs14">val p : obj</div>
<div class="tip" id="fs15">custom operation: where (bool)<br /><br />Calls Linq.QueryBuilder.Where </div>
<div class="tip" id="fs16">val a : obj</div>
<div class="tip" id="fs17">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fs18">val hok : IQueryable&lt;obj&gt;<br /><br />Full name: Japan-advent-art_.hok</div>
<div class="tip" id="fs19">val p : Linq.QuerySource&lt;obj,IQueryable&gt;</div>
<div class="tip" id="fs20">custom operation: head<br /><br />Calls Linq.QueryBuilder.Head </div>
<div class="tip" id="fs21">namespace System.Drawing</div>
<div class="tip" id="fs22">namespace System.Numerics</div>
<div class="tip" id="fs23">val c : Complex<br /><br />Full name: Japan-advent-art_.c<br /><em><br /><br />&#160;それらしいフラクタルを生成するための定数</em></div>
<div class="tip" id="fs24">Multiple items<br />type Complex =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : real:float * imaginary:float -&gt; Complex<br />&#160;&#160;&#160;&#160;member Equals : obj:obj -&gt; bool + 1 overload<br />&#160;&#160;&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;&#160;&#160;member Imaginary : float<br />&#160;&#160;&#160;&#160;member Magnitude : float<br />&#160;&#160;&#160;&#160;member Phase : float<br />&#160;&#160;&#160;&#160;member Real : float<br />&#160;&#160;&#160;&#160;member ToString : unit -&gt; string + 3 overloads<br />&#160;&#160;&#160;&#160;static val Zero : Complex<br />&#160;&#160;&#160;&#160;static val One : Complex<br />&#160;&#160;&#160;&#160;...<br />&#160;&#160;end<br /><br />Full name: System.Numerics.Complex<br /><br />--------------------<br />Complex()<br />Complex(real: float, imaginary: float) : unit</div>
<div class="tip" id="fs25">val iterate : x:float -&gt; y:float -&gt; seq&lt;Complex&gt;<br /><br />Full name: Japan-advent-art_.iterate<br /><em><br /><br />&#160;特定の座標に対するシーケンスを生成する</em></div>
<div class="tip" id="fs26">val x : float</div>
<div class="tip" id="fs27">val y : float</div>
<div class="tip" id="fs28">val loop : (Complex -&gt; seq&lt;Complex&gt;)</div>
<div class="tip" id="fs29">val current : Complex</div>
<div class="tip" id="fs30">Multiple items<br />val seq : sequence:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.Operators.seq<br /><br />--------------------<br />type seq&lt;&#39;T&gt; = System.Collections.Generic.IEnumerable&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.seq&lt;_&gt;</div>
<div class="tip" id="fs31">val countIterations : max:int -&gt; x:float -&gt; y:float -&gt; int<br /><br />Full name: Japan-advent-art_.countIterations</div>
<div class="tip" id="fs32">val max : int</div>
<div class="tip" id="fs33">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs34">val take : count:int -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.take</div>
<div class="tip" id="fs35">val takeWhile : predicate:(&#39;T -&gt; bool) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.takeWhile</div>
<div class="tip" id="fs36">val v : Complex</div>
<div class="tip" id="fs37">Complex.Abs(value: Complex) : float</div>
<div class="tip" id="fs38">val length : source:seq&lt;&#39;T&gt; -&gt; int<br /><br />Full name: Microsoft.FSharp.Collections.Seq.length</div>
<div class="tip" id="fs39">val clr : &#39;a</div>
<div class="tip" id="fs40">val count : &#39;b</div>
<div class="tip" id="fs41">val r1 : int</div>
<div class="tip" id="fs42">val g1 : int</div>
<div class="tip" id="fs43">val b1 : int</div>
<div class="tip" id="fs44">val count : int</div>
<div class="tip" id="fs45">val r2 : int</div>
<div class="tip" id="fs46">val g2 : int</div>
<div class="tip" id="fs47">val b2 : int</div>
<div class="tip" id="fs48">val c : int</div>
<div class="tip" id="fs49">val k : float</div>
<div class="tip" id="fs50">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = System.Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs51">val mid : (int -&gt; int -&gt; int)</div>
<div class="tip" id="fs52">val v1 : int</div>
<div class="tip" id="fs53">val v2 : int</div>
<div class="tip" id="fs54">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs55">type Color =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;member A : byte<br />&#160;&#160;&#160;&#160;member B : byte<br />&#160;&#160;&#160;&#160;member Equals : obj:obj -&gt; bool<br />&#160;&#160;&#160;&#160;member G : byte<br />&#160;&#160;&#160;&#160;member GetBrightness : unit -&gt; float32<br />&#160;&#160;&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;&#160;&#160;member GetHue : unit -&gt; float32<br />&#160;&#160;&#160;&#160;member GetSaturation : unit -&gt; float32<br />&#160;&#160;&#160;&#160;member IsEmpty : bool<br />&#160;&#160;&#160;&#160;member IsKnownColor : bool<br />&#160;&#160;&#160;&#160;...<br />&#160;&#160;end<br /><br />Full name: System.Drawing.Color</div>
<div class="tip" id="fs56">Color.FromArgb(argb: int) : Color<br />Color.FromArgb(alpha: int, baseColor: Color) : Color<br />Color.FromArgb(red: int, green: int, blue: int) : Color<br />Color.FromArgb(alpha: int, red: int, green: int, blue: int) : Color</div>
<div class="tip" id="fs57">val palette : Color []<br /><br />Full name: Japan-advent-art_.palette</div>
<div class="tip" id="fs58">open System.Windows.Forms<br /><br />let f = new Form(Visible=true, ClientSize=Size(400, 300))<br />let i = new PictureBox()<br />i.SizeMode &lt;- PictureBoxSizeMode.Zoom<br />i.Dock &lt;- DockStyle.Fill<br />f.Controls.Add(i)</div>
<div class="tip" id="fs59">val w : float * float<br /><br />Full name: Japan-advent-art_.w</div>
<div class="tip" id="fs60">val h : float * float<br /><br />Full name: Japan-advent-art_.h</div>
<div class="tip" id="fs61">val width : float<br /><br />Full name: Japan-advent-art_.width</div>
<div class="tip" id="fs62">val f : Form<br /><br />Full name: Japan-advent-art_.f</div>
<div class="tip" id="fs63">property Form.ClientSize: Size</div>
<div class="tip" id="fs64">property Size.Width: int</div>
<div class="tip" id="fs65">val height : float<br /><br />Full name: Japan-advent-art_.height</div>
<div class="tip" id="fs66">property Size.Height: int</div>
<div class="tip" id="fs67">val bmp : Bitmap<br /><br />Full name: Japan-advent-art_.bmp</div>
<div class="tip" id="fs68">Multiple items<br />type Bitmap =<br />&#160;&#160;inherit Image<br />&#160;&#160;new : filename:string -&gt; Bitmap + 11 overloads<br />&#160;&#160;member Clone : rect:Rectangle * format:PixelFormat -&gt; Bitmap + 1 overload<br />&#160;&#160;member GetHbitmap : unit -&gt; nativeint + 1 overload<br />&#160;&#160;member GetHicon : unit -&gt; nativeint<br />&#160;&#160;member GetPixel : x:int * y:int -&gt; Color<br />&#160;&#160;member LockBits : rect:Rectangle * flags:ImageLockMode * format:PixelFormat -&gt; BitmapData + 1 overload<br />&#160;&#160;member MakeTransparent : unit -&gt; unit + 1 overload<br />&#160;&#160;member SetPixel : x:int * y:int * color:Color -&gt; unit<br />&#160;&#160;member SetResolution : xDpi:float32 * yDpi:float32 -&gt; unit<br />&#160;&#160;member UnlockBits : bitmapdata:BitmapData -&gt; unit<br />&#160;&#160;...<br /><br />Full name: System.Drawing.Bitmap<br /><br />--------------------<br />Bitmap(filename: string) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Bitmap(stream: System.IO.Stream) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Bitmap(original: Image) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Bitmap(filename: string, useIcm: bool) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Bitmap(type: System.Type, resource: string) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Bitmap(stream: System.IO.Stream, useIcm: bool) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Bitmap(width: int, height: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Bitmap(original: Image, newSize: Size) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Bitmap(width: int, height: int, format: Imaging.PixelFormat) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Bitmap(width: int, height: int, g: Graphics) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="tip" id="fs69">val x : int32</div>
<div class="tip" id="fs70">property Image.Width: int</div>
<div class="tip" id="fs71">val y : int32</div>
<div class="tip" id="fs72">property Image.Height: int</div>
<div class="tip" id="fs73">val x&#39; : float</div>
<div class="tip" id="fs74">val snd : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T2<br /><br />Full name: Microsoft.FSharp.Core.Operators.snd</div>
<div class="tip" id="fs75">val fst : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T1<br /><br />Full name: Microsoft.FSharp.Core.Operators.fst</div>
<div class="tip" id="fs76">val y&#39; : float</div>
<div class="tip" id="fs77">val it : int</div>
<div class="tip" id="fs78">property System.Array.Length: int</div>
<div class="tip" id="fs79">Bitmap.SetPixel(x: int, y: int, color: Color) : unit</div>
<div class="tip" id="fs80">val i : PictureBox<br /><br />Full name: Japan-advent-art_.i</div>
<div class="tip" id="fs81">property PictureBox.Image: Image</div>
<div class="tip" id="fs82">val render : unit -&gt; Async&lt;unit&gt;<br /><br />Full name: Japan-advent-art_.render<br /><em><br /><br />&#160;列毎にスリープしつつ、非同期的にフラクタルを描画する</em></div>
<div class="tip" id="fs83">val async : AsyncBuilder<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.async</div>
<div class="tip" id="fs84">val canv : HTMLCanvasElement</div>
<div class="tip" id="fs85">type HTMLCanvasElement =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;inherit HTMLElement<br />&#160;&#160;end<br /><br />Full name: HTMLCanvasElement</div>
<div class="tip" id="fs86">type Globals<br /><br />Full name: Globals</div>
<div class="tip" id="fs87">property Globals.document: Document</div>
<div class="tip" id="fs88">val ctx : CanvasRenderingContext2D</div>
<div class="tip" id="fs89">member HTMLCanvasElement.getContext_2d : unit -&gt; CanvasRenderingContext2D</div>
<div class="tip" id="fs90">val img : ImageData</div>
<div class="tip" id="fs91">member CanvasRenderingContext2D.createImageData : imageDataOrSw:obj * ?sh:float -&gt; ImageData</div>
<div class="tip" id="fs92">val x : int</div>
<div class="tip" id="fs93">val y : int</div>
<div class="tip" id="fs94">val palette : (float * float * float) []<br /><br />Full name: Japan-advent-art_.palette</div>
<div class="tip" id="fs95">val setPixel : img:ImageData -&gt; x:&#39;a -&gt; y:&#39;b -&gt; width:&#39;c -&gt; r:&#39;d * g:&#39;e * b:&#39;f -&gt; unit<br /><br />Full name: Japan-advent-art_.setPixel</div>
<div class="tip" id="fs96">Multiple items<br />type Async<br />static member AsBeginEnd : computation:(&#39;Arg -&gt; Async&lt;&#39;T&gt;) -&gt; (&#39;Arg * AsyncCallback * obj -&gt; IAsyncResult) * (IAsyncResult -&gt; &#39;T) * (IAsyncResult -&gt; unit)<br />static member AwaitEvent : event:IEvent&lt;&#39;Del,&#39;T&gt; * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt; (requires delegate and &#39;Del :&gt; Delegate)<br />static member AwaitIAsyncResult : iar:IAsyncResult * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />static member AwaitTask : task:Task&lt;&#39;T&gt; -&gt; Async&lt;&#39;T&gt;<br />static member AwaitWaitHandle : waitHandle:WaitHandle * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />static member CancelDefaultToken : unit -&gt; unit<br />static member Catch : computation:Async&lt;&#39;T&gt; -&gt; Async&lt;Choice&lt;&#39;T,exn&gt;&gt;<br />static member FromBeginEnd : beginAction:(AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg:&#39;Arg1 * beginAction:(&#39;Arg1 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg1:&#39;Arg1 * arg2:&#39;Arg2 * beginAction:(&#39;Arg1 * &#39;Arg2 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg1:&#39;Arg1 * arg2:&#39;Arg2 * arg3:&#39;Arg3 * beginAction:(&#39;Arg1 * &#39;Arg2 * &#39;Arg3 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromContinuations : callback:((&#39;T -&gt; unit) * (exn -&gt; unit) * (OperationCanceledException -&gt; unit) -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member Ignore : computation:Async&lt;&#39;T&gt; -&gt; Async&lt;unit&gt;<br />static member OnCancel : interruption:(unit -&gt; unit) -&gt; Async&lt;IDisposable&gt;<br />static member Parallel : computations:seq&lt;Async&lt;&#39;T&gt;&gt; -&gt; Async&lt;&#39;T []&gt;<br />static member RunSynchronously : computation:Async&lt;&#39;T&gt; * ?timeout:int * ?cancellationToken:CancellationToken -&gt; &#39;T<br />static member Sleep : millisecondsDueTime:int -&gt; Async&lt;unit&gt;<br />static member Start : computation:Async&lt;unit&gt; * ?cancellationToken:CancellationToken -&gt; unit<br />static member StartAsTask : computation:Async&lt;&#39;T&gt; * ?taskCreationOptions:TaskCreationOptions * ?cancellationToken:CancellationToken -&gt; Task&lt;&#39;T&gt;<br />static member StartChild : computation:Async&lt;&#39;T&gt; * ?millisecondsTimeout:int -&gt; Async&lt;Async&lt;&#39;T&gt;&gt;<br />static member StartChildAsTask : computation:Async&lt;&#39;T&gt; * ?taskCreationOptions:TaskCreationOptions -&gt; Async&lt;Task&lt;&#39;T&gt;&gt;<br />static member StartImmediate : computation:Async&lt;unit&gt; * ?cancellationToken:CancellationToken -&gt; unit<br />static member StartWithContinuations : computation:Async&lt;&#39;T&gt; * continuation:(&#39;T -&gt; unit) * exceptionContinuation:(exn -&gt; unit) * cancellationContinuation:(OperationCanceledException -&gt; unit) * ?cancellationToken:CancellationToken -&gt; unit<br />static member SwitchToContext : syncContext:SynchronizationContext -&gt; Async&lt;unit&gt;<br />static member SwitchToNewThread : unit -&gt; Async&lt;unit&gt;<br />static member SwitchToThreadPool : unit -&gt; Async&lt;unit&gt;<br />static member TryCancelled : computation:Async&lt;&#39;T&gt; * compensation:(OperationCanceledException -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member CancellationToken : Async&lt;CancellationToken&gt;<br />static member DefaultCancellationToken : CancellationToken<br /><br />Full name: Microsoft.FSharp.Control.Async<br /><br />--------------------<br />type Async&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Control.Async&lt;_&gt;</div>
<div class="tip" id="fs97">static member Async.Sleep : millisecondsDueTime:int -&gt; Async&lt;unit&gt;</div>
<div class="tip" id="fs98">member CanvasRenderingContext2D.putImageData : imagedata:ImageData * dx:float * dy:float * ?dirtyX:float * ?dirtyY:float * ?dirtyWidth:float * ?dirtyHeight:float -&gt; unit</div>
<div class="tip" id="fs99">val go : HTMLButtonElement<br /><br />Full name: Japan-advent-art_.go</div>
<div class="tip" id="fs100">type HTMLButtonElement =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;inherit MSDataBindingExtensions<br />&#160;&#160;&#160;&#160;inherit HTMLElement<br />&#160;&#160;end<br /><br />Full name: HTMLButtonElement</div>
<div class="tip" id="fs101">member HTMLElement.addEventListener_click : listener:System.Func&lt;MouseEvent,obj&gt; * ?useCapture:bool -&gt; unit</div>
<div class="tip" id="fs102">static member Async.StartImmediate : computation:Async&lt;unit&gt; * ?cancellationToken:System.Threading.CancellationToken -&gt; unit</div>
<div class="tip" id="fs103">val setPixel : img:ImageData -&gt; x:int -&gt; y:int -&gt; width:int -&gt; r:float * g:float * b:float -&gt; unit<br /><br />Full name: Japan-advent-art_.setPixel<br /><em><br /><br />&#160;ImageDataにあるピクセルの値を特定の色に設定する</em></div>
<div class="tip" id="fs104">type ImageData<br /><br />Full name: ImageData</div>
<div class="tip" id="fs105">val width : int</div>
<div class="tip" id="fs106">val r : float</div>
<div class="tip" id="fs107">val g : float</div>
<div class="tip" id="fs108">val b : float</div>
<div class="tip" id="fs109">val index : int</div>
<div class="tip" id="fs110">property ImageData.data: float array</div>
<div class="tip" id="fs111">val doc : Document</div>
<div class="tip" id="fs112">type Document =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;inherit MSNodeExtensions<br />&#160;&#160;&#160;&#160;inherit MSResourceMetadata<br />&#160;&#160;&#160;&#160;inherit DocumentEvent<br />&#160;&#160;&#160;&#160;inherit MSEventAttachmentTarget<br />&#160;&#160;&#160;&#160;inherit NodeSelector<br />&#160;&#160;&#160;&#160;inherit Node<br />&#160;&#160;end<br /><br />Full name: Document</div>
<div class="tip" id="fs113">val name : string</div>
<div class="tip" id="fs114">member Document.getElementById : elementId:string -&gt; HTMLElement</div>


<div class="row">
  <div class="small-6 columns"><p class="post-discuss">
		Discuss <a href="http://twitter.com/tomaspetricek">on twitter</a>, <script type="text/javascript" src="http://www.reddit.com/buttonlite.js?i=0"></script>.<br />
		Send corrections via <a href="https://github.com/tpetricek/TomaspNet.Website">GitHub pull requests</a>.
	</p></div>
  <div class="small-6 columns">

<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style addthis_16x16_style">
<a class="addthis_button_twitter"></a>
<a class="addthis_button_reddit"></a>
<a class="addthis_button_google_plusone_share"></a>
<a class="addthis_button_hackernews"></a>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = { "data_track_addressbar": false };</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-521c32162e6001a0"></script>
<!-- AddThis Button END -->

<p class="post-meta">
  <span><strong>Published</strong> Tuesday, 24 December 2013, 3:58 AM</span><br />      
  <span><strong>By</strong> <a href="https://plus.google.com/+TomasPetriceks?rel=author">Tomas Petricek</a></span><br />
  <span class="tags"><strong>Tags</strong> f#, art, fractals, funscript, f# data</span>
</p>

  </div>
</div>

    </content>

  </div>
  <div class="large-4 columns" id="right-bar">
    <div class="right-item" id="right-calendar">
<script type="text/javascript">
  var monthNames =
    ["January", "February", "March", "April", "May", "June",
      "July", "August", "September", "October", "November", "December"];
  var d = new Date();
  var m = monthNames[d.getMonth()];
  var y = d.getFullYear();
  var ml = m.toLowerCase();
  document.writeln("<h4>Calendar - " + m + " " + y + "</h4>");
  document.writeln("<a href=\"http://tomasp.net/calendar/" + y + "/" + ml + ".html\">" +
    "<img src=\"http://tomasp.net/calendar/" + y + "/" + ml + "-preview.jpg\" style=\"border-style:none;\" />" +
    "</a>");
</script> 
<p>The calendar shows a new picture each month. See photos for
  <a href="http://tomasp.net/calendar/2005">2005</a>, <a href="http://tomasp.net/calendar/2006">2006</a>, 
  <a href="http://tomasp.net/calendar/2007">2007</a>, <a href="http://tomasp.net/calendar/2008">2008</a>, 
  <a href="http://tomasp.net/calendar/2009">2009</a>, <a href="http://tomasp.net/calendar/2010">2010</a>, 
  <a href="http://tomasp.net/calendar/2011">2011</a>, <a href="http://tomasp.net/calendar/2012">2012</a>,
  <a href="http://tomasp.net/calendar/2013">2013</a>, <a href="http://tomasp.net/calendar/2014">2014</a>
  and the first photos of <a href="http://tomasp.net/calendar/2015">2015</a>.
</p>
</div>

    <h3>Welcome!</h3>
    <img src="http://tomasp.net/img/tomas.jpg" alt="Tomas Petricek" style="float:right;margin:10px 0px 10px 10px;" />
    <p>I'm an F# open-source developer, book author and computer scientist. I submitted my PhD thesis recently.
      When offline, I enjoy traveling and taking pictures. You can find me at
      at <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a> or email 
      <a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a>.
    </p>

    <h4>Trainings and consulting</h4>
    <a href="http://fsharpworks.com"><img src="http://tomasp.net/img/fsharpworks.png" alt="F# Works" style="float:right;margin:15px 0px 10px 10px; width:150px" /></a>
    <p>I'm an experienced F# developer and trainer. <br /> I offer training and consulting
      services through <a href="http://fsharpworks.com">F# Works</a>.
    </p>
    <ul>
      <li>Check out my <a href="http://fsharpworks.com/workshops/fast-track.html">in-person Fast Track to F#</a> course</li>
      <li>Check out my <a href="http://fsharpworks.com/workshops/finance.html">online F# in Finance</a> course</li>
      <li><a href="mailto:tomas@tomasp.net">Email me</a> for info about private trainings</li>
    </ul>
    
    <script type="text/javascript" src="http://tomasp.net/news/news.js"></script>
    <h4>What's new? &#160; <small><script type="text/javascript">document.write(news.date)</script></small></h4>
    <script>
      document.write(news.info);
    </script>

    <h4>Functional F# and C# books</h4>
    <div style="float:right;">
      <a href="http://www.amazon.com/gp/product/1933988924/ref=as_li_tf_il?ie=UTF8&amp;tag=httptomasnet-20&amp;linkCode=as2&amp;camp=217145&amp;creative=399369&amp;creativeASIN=1933988924">
        <img src="http://tomasp.net/img/deepdives.png" alt="F# Deep Dives" style="float:right;margin:15px 0px 15px 10px;border-style:none;" />
      </a>
    </div>
    <p>
      I wrote or contributed to two books on F# and functional programming:
      <a href="http://functional-programming.net/rwfp">Real World Functional Programming</a> explains functional
      concepts using F# and C# and <a href="http://functional-programming.net/deepdives">F# Deep Dives</a> is a 
      collection of case studies written by industry experts.</p>
    <ul>
      <li><a href="http://functional-programming.net/rwfp"><strong>Real World Funcitonal Programming</strong></a> home page. See
        <a href="http://manning.com/petricek">Manning</a>,
        <a href="https://www.amazon.com/dp/1933988924?tag=httptomasnet-20&amp;camp=213381&amp;creative=390973&amp;linkCode=as4&amp;creativeASIN=1933988924&amp;adid=0F1DP260JGG4KY0CDGP6">Amazon.com</a> or
        <a href="https://www.amazon.co.uk/dp/1933988924?tag=tomasnet-21&amp;camp=1406&amp;creative=6394&amp;linkCode=as1&amp;creativeASIN=1933988924&amp;adid=1CTY87YCCQEJW965GNDF">Amazon.co.uk</a>.
      </li>
      <li><a href="http://functional-programming.net/deepdives"><strong>F# Deep Dives</strong></a> home page. Get it from
        <a href="http://www.manning.com/petricek2">Manning.com</a>,
        <a href="http://www.amazon.com/gp/product/1617291323/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1617291323&linkCode=as2&tag=httptomasnet-20&linkId=U4FPJJSKKCCKGNHD">Amazon.com</a> or
        <a href="http://www.amazon.co.uk/gp/product/1617291323/ref=as_li_tl?ie=UTF8&camp=1634&creative=19450&creativeASIN=1617291323&linkCode=as2&tag=tomasnet-21&linkId=HTUYVHHGWB4Q7X6V">Amazon.co.uk</a>.
      </li>
    </ul>    
    <p>I also wrote a series of tutorials on <a href="http://www.tryfsharp.org/Learn/financial-computing">financial computing for Try F#</a>.
      This interactive environment let's you try F# in the browser.</p>

    <h4>Research and teaching</h4>
    <img src="http://tomasp.net/img/cam.png" alt="University of Cambride" style="float:right;margin:25px 0px 10px 10px;" />
    <p>I submitted my PhD thesis at the <a href="http://www.cl.cam.ac.uk/">University of Cambridge</a>,
      working on making better types for programs that run in rich context (like F# type providers, distributed 
      prog&shy;ramming or data-flow). See <a href="http://tomasp.net/academic/">my academic page</a> for
      more.</p>

    <h4>Blog tags</h4>
    <p>

      <a href="http://tomasp.net/blog/tag/fsharp/">f#</a>&nbsp;(99),       <a href="http://tomasp.net/blog/tag/csharp/">c#</a>&nbsp;(33),       <a href="http://tomasp.net/blog/tag/functional-programming/">functional programming</a>&nbsp;(11),       <a href="http://tomasp.net/blog/tag/research/">research</a>&nbsp;(29),       <a href="http://tomasp.net/blog/tag/fun/">fun</a>&nbsp;(3),       <a href="http://tomasp.net/blog/tag/talks/">talks</a>&nbsp;(4),       <a href="http://tomasp.net/blog/tag/open-source/">open source</a>&nbsp;(4),       <a href="http://tomasp.net/blog/tag/data-science/">data science</a>&nbsp;(2),       <a href="http://tomasp.net/blog/tag/monads/">monads</a>&nbsp;(2),       <a href="http://tomasp.net/blog/tag/fslab/">fslab</a>&nbsp;(1),       <a href="http://tomasp.net/blog/tag/deedle/">deedle</a>&nbsp;(1),       <a href="http://tomasp.net/blog/tag/philosophy/">philosophy</a>&nbsp;(1)    </p>

  </div>
</div>


  <div class="row" id="footer">
  <footer>   
    <div class="large-3 columns">
      <h4>Contact &amp; about</h4>
      <p>This site is hosted on GitHub and is generated using <a href="https://github.com/tpetricek/FSharp.Formatting">F# Formatting</a>.
        For more info, see the <a href="https://github.com/tpetricek/TomaspNet.Website">website source on GitHub</a>.
      </p>
      <p>Please submit issues &amp; corrections on GitHub. Use pull requests for minor corrections only.</p>
      <ul>
        <li>Email me: <a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a></li>
        <li>Connect via Twitter: <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a></li>
        <li>More: <a href="http://uk.linkedin.com/in/tomaspetricek">LinkedIn</a> | <a href="http://lanyrd.com/profile/tomasp/">Lanyrd</a> | <a href="https://github.com/tpetricek">GitHub</a></li>
      </ul>
    </div>
    <div class="large-7 columns">
    <h4>Blog archives <a href="http://tomasp.net/rss.xml"><img src="http://tomasp.net/img/rss.gif" /></a></h4>
      <a href="http://tomasp.net/blog/archive/february-2015/index.html">
        February 2015 (1)</a>,      <a href="http://tomasp.net/blog/archive/january-2015/index.html">
        January 2015 (2)</a>,      <a href="http://tomasp.net/blog/archive/december-2014/index.html">
        December 2014 (1)</a>,      <a href="http://tomasp.net/blog/archive/may-2014/index.html">
        May 2014 (3)</a>,      <a href="http://tomasp.net/blog/archive/april-2014/index.html">
        April 2014 (2)</a>,      <a href="http://tomasp.net/blog/archive/march-2014/index.html">
        March 2014 (1)</a>,      <a href="http://tomasp.net/blog/archive/january-2014/index.html">
        January 2014 (2)</a>,      <a href="http://tomasp.net/blog/archive/december-2013/index.html">
        December 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/november-2013/index.html">
        November 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/october-2013/index.html">
        October 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/september-2013/index.html">
        September 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/august-2013/index.html">
        August 2013 (2)</a>,      <a href="http://tomasp.net/blog/archive/may-2013/index.html">
        May 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/april-2013/index.html">
        April 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2013/index.html">
        March 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/february-2013/index.html">
        February 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/january-2013/index.html">
        January 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2012/index.html">
        December 2012 (2)</a>,      <a href="http://tomasp.net/blog/archive/october-2012/index.html">
        October 2012 (1)</a>,      <a href="http://tomasp.net/blog/archive/august-2012/index.html">
        August 2012 (3)</a>,      <a href="http://tomasp.net/blog/archive/june-2012/index.html">
        June 2012 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2012/index.html">
        April 2012 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2012/index.html">
        March 2012 (4)</a>,      <a href="http://tomasp.net/blog/archive/february-2012/index.html">
        February 2012 (5)</a>,      <a href="http://tomasp.net/blog/archive/january-2012/index.html">
        January 2012 (2)</a>,      <a href="http://tomasp.net/blog/archive/november-2011/index.html">
        November 2011 (5)</a>,      <a href="http://tomasp.net/blog/archive/august-2011/index.html">
        August 2011 (3)</a>,      <a href="http://tomasp.net/blog/archive/july-2011/index.html">
        July 2011 (2)</a>,      <a href="http://tomasp.net/blog/archive/june-2011/index.html">
        June 2011 (2)</a>,      <a href="http://tomasp.net/blog/archive/may-2011/index.html">
        May 2011 (2)</a>,      <a href="http://tomasp.net/blog/archive/march-2011/index.html">
        March 2011 (4)</a>,      <a href="http://tomasp.net/blog/archive/december-2010/index.html">
        December 2010 (1)</a>,      <a href="http://tomasp.net/blog/archive/november-2010/index.html">
        November 2010 (6)</a>,      <a href="http://tomasp.net/blog/archive/october-2010/index.html">
        October 2010 (6)</a>,      <a href="http://tomasp.net/blog/archive/september-2010/index.html">
        September 2010 (4)</a>,      <a href="http://tomasp.net/blog/archive/july-2010/index.html">
        July 2010 (3)</a>,      <a href="http://tomasp.net/blog/archive/june-2010/index.html">
        June 2010 (2)</a>,      <a href="http://tomasp.net/blog/archive/may-2010/index.html">
        May 2010 (1)</a>,      <a href="http://tomasp.net/blog/archive/february-2010/index.html">
        February 2010 (2)</a>,      <a href="http://tomasp.net/blog/archive/january-2010/index.html">
        January 2010 (3)</a>,      <a href="http://tomasp.net/blog/archive/december-2009/index.html">
        December 2009 (3)</a>,      <a href="http://tomasp.net/blog/archive/july-2009/index.html">
        July 2009 (1)</a>,      <a href="http://tomasp.net/blog/archive/june-2009/index.html">
        June 2009 (3)</a>,      <a href="http://tomasp.net/blog/archive/may-2009/index.html">
        May 2009 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2009/index.html">
        April 2009 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2009/index.html">
        March 2009 (2)</a>,      <a href="http://tomasp.net/blog/archive/february-2009/index.html">
        February 2009 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2008/index.html">
        December 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/november-2008/index.html">
        November 2008 (5)</a>,      <a href="http://tomasp.net/blog/archive/october-2008/index.html">
        October 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/september-2008/index.html">
        September 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/june-2008/index.html">
        June 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2008/index.html">
        March 2008 (3)</a>,      <a href="http://tomasp.net/blog/archive/february-2008/index.html">
        February 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2007/index.html">
        December 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/november-2007/index.html">
        November 2007 (6)</a>,      <a href="http://tomasp.net/blog/archive/october-2007/index.html">
        October 2007 (1)</a>,      <a href="http://tomasp.net/blog/archive/september-2007/index.html">
        September 2007 (1)</a>,      <a href="http://tomasp.net/blog/archive/august-2007/index.html">
        August 2007 (1)</a>,      <a href="http://tomasp.net/blog/archive/july-2007/index.html">
        July 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2007/index.html">
        April 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/march-2007/index.html">
        March 2007 (3)</a>,      <a href="http://tomasp.net/blog/archive/february-2007/index.html">
        February 2007 (3)</a>,      <a href="http://tomasp.net/blog/archive/january-2007/index.html">
        January 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/november-2006/index.html">
        November 2006 (1)</a>,      <a href="http://tomasp.net/blog/archive/october-2006/index.html">
        October 2006 (3)</a>,      <a href="http://tomasp.net/blog/archive/august-2006/index.html">
        August 2006 (2)</a>,      <a href="http://tomasp.net/blog/archive/july-2006/index.html">
        July 2006 (1)</a>,      <a href="http://tomasp.net/blog/archive/june-2006/index.html">
        June 2006 (3)</a>,      <a href="http://tomasp.net/blog/archive/may-2006/index.html">
        May 2006 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2006/index.html">
        April 2006 (2)</a>,      <a href="http://tomasp.net/blog/archive/december-2005/index.html">
        December 2005 (1)</a>,      <a href="http://tomasp.net/blog/archive/july-2005/index.html">
        July 2005 (4)</a>,      <a href="http://tomasp.net/blog/archive/june-2005/index.html">
        June 2005 (5)</a>,      <a href="http://tomasp.net/blog/archive/may-2005/index.html">
        May 2005 (1)</a>,      <a href="http://tomasp.net/blog/archive/april-2005/index.html">
        April 2005 (3)</a>,      <a href="http://tomasp.net/blog/archive/march-2005/index.html">
        March 2005 (3)</a>,      <a href="http://tomasp.net/blog/archive/january-2005/index.html">
        January 2005 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2004/index.html">
        December 2004 (3)</a>,      <a href="http://tomasp.net/blog/archive/november-2004/index.html">
        November 2004 (2)</a>,    </div>
    <div class="large-2 columns">
      <h4>License</h4>
      <p>Unless explicitly mentioned, all articles on this site are licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a>. 
        All source code samples are licensed under Apache 2.0.
      </p>
      <img src="http://tomasp.net/img/cc-sa.png" alt="CC License logo" />
    </div>
  </footer>
  </div>
  
  <script>
  document.write('<script src=' +
  ('__proto__' in {} ? 'http://tomasp.net/js/vendor/zepto' : 'http://tomasp.net/js/vendor/jquery') +
  '.js><\/script>')
  </script>
  
  <script src="http://tomasp.net/js/foundation.min.js"></script>
  <script>
    $(document).foundation();
  </script>
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1561220-1']);
    _gaq.push(['_trackPageview']);

    (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
  <script src="http://cdn.lanyrd.net/badges/person-v1.min.js"></script>
</body>
</html>