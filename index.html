<!DOCTYPE html>
<!--[if IE 8]> 				 <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<head>
  <meta charset="utf-8">
  <title>Tomas Petricek's virtual universe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Writing about software development in F# and .NET, sharing materials from my F# trainings and talks, writing about programming language research and theory.">
  <meta name="author" content="Tomas Petricek">

  <!-- Reference Foundation -->
  <link rel="stylesheet" href="http://tomasp.net/css/foundation.css">
  <script src="js/vendor/custom.modernizr.js"></script>

  <link rel="alternate" type="application/rss+xml" href="http://tomasp.net/rss.xml" title="RSS feed for Tomas Petricek's blog">
  <link rel="icon" type="image/png" href="http://tomasp.net/img/favicon.png" />
    
  <!-- Reference custom CSS and tooltips -->
  <link type="text/css" rel="stylesheet" href="http://tomasp.net/custom/style.css" />
  <script type="text/javascript" src="http://tomasp.net/custom/tooltips.js"></script>
  <link type="text/css" rel="stylesheet" href="http://tomasp.net/custom/tooltips.css" />
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  <meta name="twitter:card" content="summary">
  <meta name="twitter:creator" content="@tomaspetricek">
  <meta name="twitter:title" content="Tomas Petricek's virtual universe">
  <meta name="twitter:description" content="Writing about software development in F# and .NET, sharing materials from my F# trainings and talks, writing about programming language research and theory.">
</head>
<body>

   <header id="top-header">
    <div class="row">
      <div class="twelve columns">
        <h1><a href="http://tomasp.net/">Tomas Petricek's blog</a></h1>
        <p>Writing about practical F# coding and programming language research</p>
      </div>
    </div>
  </header>

  <header class="top-bar-header">
    <div class="contain-to-grid sticky">
    <nav class="top-bar">

    <ul class="title-area">
      <li class="name"><h1><a href="#"></a></h1></li>
      <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>
    <section class="top-bar-section">
      <ul class="right">
        <li><a href="http://tomasp.net/blog/index.html">Blog</a></li>
        <li><a href="http://functional-programming.net">Books</a></li>
        <li><a href="http://fsharpworks.com/workshops.html">Trainings</a></li>
        <li><a href="http://fsharpworks.com">Consulting</a></li>
        <li><a href="http://tomasp.net/academic">Research</a></li>
      </ul>
    </section>

    </nav></div>
  </header>
  
  

<div class="row">
	<div class="large-6 columns main-content">
  <content class="hp">

  <!-- Print more details about the first blog post -->

  <div>
  <h1><a href="http://tomasp.net/blog/2015/library-frameworks/index.html">Library patterns: Why frameworks are evil</a></h1>
  <img src="http://tomasp.net/blog/2015/library-frameworks/diagram-narrow.png" style="float:right;margin:25px 0px 25px 20px" />

<p>This article is a follow up to my previous blog post about <a href="http://tomasp.net/blog/2015/library-layers">functional library 
design</a>, but you do not need to read the previous one,
because I'll focus on a different topic.</p>

<p>In the previous article, I wrote about a couple of principles that I find useful when 
designing libraries in a functional style. This follows from my experience with building
F# libraries, but the ideas are quite general and can be useful in any programming language.
Previously, I wrote how <em>multiple layers of abstraction</em> let you build libraries that make
80% of scenarios easy while still supporting the more interesting use cases.</p>

<p>In this article, I'll focus on two other points from the list - how to design <em>composable</em>
libraries and how (and why) to <em>avoid callbacks</em> in library design. As the title suggests, this
boils down to one thing - build <strong>libraries</strong> rather than <strong>frameworks</strong>!</p>


      
  <p class="meta">
    <span><strong>Published</strong>: Sunday, 1 March 2015, 4:54 PM</span>
      <br />      
      <span class="tags"><strong>Tags</strong>: f#, open source, functional programming </span> 
    <br />
    <a href="http://tomasp.net/blog/2015/library-frameworks/index.html">Read the complete article</a>
  </p>
  </div>

  <!-- For remaining articles, just print short summary with abstract -->
  <h1><a href="http://tomasp.net/blog/index.html">Recent articles from my blog</a></h1>
    <h2><a href="http://tomasp.net/blog/2015/library-layers/index.html">Library patterns: Multiple levels of abstraction</a></h2>
    <p class="smdate">Tuesday, 3 February 2015, 4:54 PM</p>
    <p class="description">
        Over the last few years, I created or contributed to a number of libraries. In this blog post (or perhaps a series), I'll share some of the things I learned when trying to answer the question: What should a good library look like? I'll start by looking at a library design pattern that I call 'levels of abstraction'.
    </p>
    <h2><a href="http://tomasp.net/blog/2015/fnuplot/index.html">FnuPlot: Cross-platform charting with gnuplot</a></h2>
    <p class="smdate">Thursday, 15 January 2015, 5:58 PM</p>
    <p class="description">
        There is a bunch of visualization and charting libraries for F#. Sadly, perhaps the most advanced ones do not work particularly well outside of Windows. This blog post introduces a new work-in-progress library called FnuPlot which is a lightweight and cross-platform wrapper for gnuplot.
    </p>
    <h2><a href="http://tomasp.net/blog/2015/why-fsharp-in-2015/index.html">Why you should learn F# in 2015 (and how)?</a></h2>
    <p class="smdate">Wednesday, 7 January 2015, 2:36 PM</p>
    <p class="description">
        I guess that it might be a bit too late for adding to your list of new year's resulution now.But just if you still have an empty slot (or in case an originally taken slot has become available), your new year's resolution should be to get involved with F#!
    </p>
    <h2><a href="http://tomasp.net/blog/2014/composing-christmas/index.html">Composing Christmas with F#</a></h2>
    <p class="smdate">Monday, 8 December 2014, 6:22 PM</p>
    <p class="description">
        This blog post is a part of the F# Advent Calendar 2014, so it inevitably needs a Chrismassy theme. However, there is also going to be a serious theme for the blog post, which is domain-specific languages. I'm going to cover two key ideas of DSLs in F# - composability and multiple layers of abstraction.
    </p>

  <p class="meta">
    <a href="http://tomasp.net/blog/index.html">Find older blog articles here</a>
  </p>
  </content>
	</div>

  <div class="large-6 columns main-content">
    <div class="row">
      <div class="small-6 columns">
        <h2 class="first">Welcome!</h2>
        <p>I'm an open-source developer and computer scientist who enjoys combining theory and practice.
          On the practical side, I write about F#, run trainings and provide consulting via 
          <a href="http://fsharpworks.com">F# Works</a>. On the theory side, I work on 
          various <a href="http://tomasp.net/academic">programming language topics</a>.
        </p>
      </div>
      <div class="small-6 columns">
        <img src="http://tomasp.net/img/tomas-big.jpg" />
      </div>
    </div>

    <h2>Trainings and consulting</h2>
    <p>I'm a frequent speaker at F# and .NET events, founding member of the 
      <a href="http://fsharp.org">F# Foundation</a> author of C# and F# book and a 
      <a href="http://stackoverflow.com/users/33518/tomas-petricek">StackOverflow fanatic</a>. I&nbsp;have 
      been Microsoft C# MVP since 2004 and used F# since early Microsoft Research versions.
    </p>
    <a href="http://fsharpworks.com"><img src="http://tomasp.net/img/fsharpworks.png" style="float:right;width:150px;margin:0px 0px 10px 15px" /></a>
    <p>Have you seen the <a href="http://fsharp.org/testimonials/">F# testimonials</a> and are you 
      thinking how your company can also benefit from the safety, correctness, efficiency and 
      faster time-to-market provided by F#?</p>

    <ul class="spaces">
      <li><strong>Consulting and trainings.</strong> 
        At <a href="http://fsharpworks.com">F# Works</a>, we love F#, but we also understand
        its challenges and we're always happy to have an informal chat. Drop 
        <a href="mailto:tomas@tomasp.net">me an email</a> if you're interested.

      <li><strong>F# books and articles.</strong> I wrote <a href="http://functional-programming.net/rwfp/">Real World Functional Prog&shy;ramming</a>,
         which explains functional concepts using C# and F# and editted a collection of F# case studies called <a href="http://www.functional-programming.net/deepdives/">F# Deep Dives</a>.
      </li>
      <li><strong>Public online and in-person courses.</strong> 
        I created an online course <a href="http://fsharpworks.com/workshops/finance.html">F# in Finance</a>
        and we regularly run an in-person course <a href="http://fsharpworks.com/workshops/fast-track.html">Fast Track to F#</a>
        with our partners in London and New York. We offer <a href="http://fsharpworks.com/workshops">both of these and more</a>
        as private courses too, so <a href="mailto:tomas@tomasp.net">get in touch</a>!
      </li>
    </ul>

    <h2>Research &amp; teaching</h2>
    <p>I'm interested in a wide range of topics in programming languages, ranging from category theory,
        comonads, reactive and distributed programming to scientific computing and working with data.
    </p>
    <p>I like working on topics inspired by practical problems. I created a <a href="http://tomasp.net/academic/theses/webtools/">web framework for F#</a>
      that inspired commercial projects like <a href="http://websharper.com/">WebSharper</a> and my
      experimental F# extensions can be tested live on <a href="http://tryjoinads.org/">tryjoinads.org</a>.
      
    </p>

    <ul class="spaces">
      <li><a href="http://tomasp.net/academic/theses/coeffects/"><strong>Context-aware programming languages</strong></a> 
        is my (recently submitted) PhD thesis that discusses the theory of context-dependent computations.
        I also wrote a <a href="http://tomasp.net/blog/2014/why-coeffects-matter/index.html">more readable introduction</a> to coeffects.
      </li>
      <li><a href="http://www.cl.cam.ac.uk/~tp322/"><strong>Academic web page</strong></a> has links to other published papers, work-in-progress drafts, 
        research talks and also information about projects and courses that I supervised.
      </li>
    </ul>
    
    <div id="hp-calendar">
      <script type="text/javascript">
        var monthNames =
          ["January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"];
        var d = new Date();
        var m = monthNames[d.getMonth()];
        var y = d.getFullYear();
        var ml = m.toLowerCase();
        document.writeln("<h4>Calendar - " + m + " " + y + "</h4>");
        document.writeln("<a href=\"http://tomasp.net/calendar/" + y + "/" + ml + ".html\">" +
          "<img src=\"http://tomasp.net/calendar/" + y + "/" + ml + "-preview.jpg\" style=\"border-style:none;\" />" +
          "</a>");
      </script> 
      <p>When the time permits, I enjoy traveling. The calendar shows a new picture each month. See 
        <a href="http://tomasp.net/calendar/2005">2005</a>, <a href="http://tomasp.net/calendar/2006">2006</a>, 
        <a href="http://tomasp.net/calendar/2007">2007</a>, <a href="http://tomasp.net/calendar/2008">2008</a>, 
        <a href="http://tomasp.net/calendar/2009">2009</a>, <a href="http://tomasp.net/calendar/2010">2010</a>, 
        <a href="http://tomasp.net/calendar/2011">2011</a>, <a href="http://tomasp.net/calendar/2012">2012</a>, 
        <a href="http://tomasp.net/calendar/2013">2013</a>, <a href="http://tomasp.net/calendar/2014">2014</a>
        and the first photos of <a href="http://tomasp.net/calendar/2015">2015</a>.
      </p>
    </div>

  </div>
</div>


  <div class="row" id="footer">
  <footer>   
    <div class="large-3 columns">
      <h4>Contact &amp; about</h4>
      <p>This site is hosted on GitHub and is generated using <a href="https://github.com/tpetricek/FSharp.Formatting">F# Formatting</a>.
        For more info, see the <a href="https://github.com/tpetricek/TomaspNet.Website">website source on GitHub</a>.
      </p>
      <p>Please submit issues &amp; corrections on GitHub. Use pull requests for minor corrections only.</p>
      <ul>
        <li>Email me: <a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a></li>
        <li>Connect via Twitter: <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a></li>
        <li>More: <a href="http://uk.linkedin.com/in/tomaspetricek">LinkedIn</a> | <a href="http://lanyrd.com/profile/tomasp/">Lanyrd</a> | <a href="https://github.com/tpetricek">GitHub</a></li>
      </ul>
    </div>
    <div class="large-7 columns">
    <h4>Blog archives <a href="http://tomasp.net/rss.xml"><img src="http://tomasp.net/img/rss.gif" /></a></h4>
      <a href="http://tomasp.net/blog/archive/march-2015/index.html">
        March 2015 (1)</a>,      <a href="http://tomasp.net/blog/archive/february-2015/index.html">
        February 2015 (1)</a>,      <a href="http://tomasp.net/blog/archive/january-2015/index.html">
        January 2015 (2)</a>,      <a href="http://tomasp.net/blog/archive/december-2014/index.html">
        December 2014 (1)</a>,      <a href="http://tomasp.net/blog/archive/may-2014/index.html">
        May 2014 (3)</a>,      <a href="http://tomasp.net/blog/archive/april-2014/index.html">
        April 2014 (2)</a>,      <a href="http://tomasp.net/blog/archive/march-2014/index.html">
        March 2014 (1)</a>,      <a href="http://tomasp.net/blog/archive/january-2014/index.html">
        January 2014 (2)</a>,      <a href="http://tomasp.net/blog/archive/december-2013/index.html">
        December 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/november-2013/index.html">
        November 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/october-2013/index.html">
        October 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/september-2013/index.html">
        September 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/august-2013/index.html">
        August 2013 (2)</a>,      <a href="http://tomasp.net/blog/archive/may-2013/index.html">
        May 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/april-2013/index.html">
        April 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2013/index.html">
        March 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/february-2013/index.html">
        February 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/january-2013/index.html">
        January 2013 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2012/index.html">
        December 2012 (2)</a>,      <a href="http://tomasp.net/blog/archive/october-2012/index.html">
        October 2012 (1)</a>,      <a href="http://tomasp.net/blog/archive/august-2012/index.html">
        August 2012 (3)</a>,      <a href="http://tomasp.net/blog/archive/june-2012/index.html">
        June 2012 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2012/index.html">
        April 2012 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2012/index.html">
        March 2012 (4)</a>,      <a href="http://tomasp.net/blog/archive/february-2012/index.html">
        February 2012 (5)</a>,      <a href="http://tomasp.net/blog/archive/january-2012/index.html">
        January 2012 (2)</a>,      <a href="http://tomasp.net/blog/archive/november-2011/index.html">
        November 2011 (5)</a>,      <a href="http://tomasp.net/blog/archive/august-2011/index.html">
        August 2011 (3)</a>,      <a href="http://tomasp.net/blog/archive/july-2011/index.html">
        July 2011 (2)</a>,      <a href="http://tomasp.net/blog/archive/june-2011/index.html">
        June 2011 (2)</a>,      <a href="http://tomasp.net/blog/archive/may-2011/index.html">
        May 2011 (2)</a>,      <a href="http://tomasp.net/blog/archive/march-2011/index.html">
        March 2011 (4)</a>,      <a href="http://tomasp.net/blog/archive/december-2010/index.html">
        December 2010 (1)</a>,      <a href="http://tomasp.net/blog/archive/november-2010/index.html">
        November 2010 (6)</a>,      <a href="http://tomasp.net/blog/archive/october-2010/index.html">
        October 2010 (6)</a>,      <a href="http://tomasp.net/blog/archive/september-2010/index.html">
        September 2010 (4)</a>,      <a href="http://tomasp.net/blog/archive/july-2010/index.html">
        July 2010 (3)</a>,      <a href="http://tomasp.net/blog/archive/june-2010/index.html">
        June 2010 (2)</a>,      <a href="http://tomasp.net/blog/archive/may-2010/index.html">
        May 2010 (1)</a>,      <a href="http://tomasp.net/blog/archive/february-2010/index.html">
        February 2010 (2)</a>,      <a href="http://tomasp.net/blog/archive/january-2010/index.html">
        January 2010 (3)</a>,      <a href="http://tomasp.net/blog/archive/december-2009/index.html">
        December 2009 (3)</a>,      <a href="http://tomasp.net/blog/archive/july-2009/index.html">
        July 2009 (1)</a>,      <a href="http://tomasp.net/blog/archive/june-2009/index.html">
        June 2009 (3)</a>,      <a href="http://tomasp.net/blog/archive/may-2009/index.html">
        May 2009 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2009/index.html">
        April 2009 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2009/index.html">
        March 2009 (2)</a>,      <a href="http://tomasp.net/blog/archive/february-2009/index.html">
        February 2009 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2008/index.html">
        December 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/november-2008/index.html">
        November 2008 (5)</a>,      <a href="http://tomasp.net/blog/archive/october-2008/index.html">
        October 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/september-2008/index.html">
        September 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/june-2008/index.html">
        June 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/march-2008/index.html">
        March 2008 (3)</a>,      <a href="http://tomasp.net/blog/archive/february-2008/index.html">
        February 2008 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2007/index.html">
        December 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/november-2007/index.html">
        November 2007 (6)</a>,      <a href="http://tomasp.net/blog/archive/october-2007/index.html">
        October 2007 (1)</a>,      <a href="http://tomasp.net/blog/archive/september-2007/index.html">
        September 2007 (1)</a>,      <a href="http://tomasp.net/blog/archive/august-2007/index.html">
        August 2007 (1)</a>,      <a href="http://tomasp.net/blog/archive/july-2007/index.html">
        July 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2007/index.html">
        April 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/march-2007/index.html">
        March 2007 (3)</a>,      <a href="http://tomasp.net/blog/archive/february-2007/index.html">
        February 2007 (3)</a>,      <a href="http://tomasp.net/blog/archive/january-2007/index.html">
        January 2007 (2)</a>,      <a href="http://tomasp.net/blog/archive/november-2006/index.html">
        November 2006 (1)</a>,      <a href="http://tomasp.net/blog/archive/october-2006/index.html">
        October 2006 (3)</a>,      <a href="http://tomasp.net/blog/archive/august-2006/index.html">
        August 2006 (2)</a>,      <a href="http://tomasp.net/blog/archive/july-2006/index.html">
        July 2006 (1)</a>,      <a href="http://tomasp.net/blog/archive/june-2006/index.html">
        June 2006 (3)</a>,      <a href="http://tomasp.net/blog/archive/may-2006/index.html">
        May 2006 (2)</a>,      <a href="http://tomasp.net/blog/archive/april-2006/index.html">
        April 2006 (2)</a>,      <a href="http://tomasp.net/blog/archive/december-2005/index.html">
        December 2005 (1)</a>,      <a href="http://tomasp.net/blog/archive/july-2005/index.html">
        July 2005 (4)</a>,      <a href="http://tomasp.net/blog/archive/june-2005/index.html">
        June 2005 (5)</a>,      <a href="http://tomasp.net/blog/archive/may-2005/index.html">
        May 2005 (1)</a>,      <a href="http://tomasp.net/blog/archive/april-2005/index.html">
        April 2005 (3)</a>,      <a href="http://tomasp.net/blog/archive/march-2005/index.html">
        March 2005 (3)</a>,      <a href="http://tomasp.net/blog/archive/january-2005/index.html">
        January 2005 (1)</a>,      <a href="http://tomasp.net/blog/archive/december-2004/index.html">
        December 2004 (3)</a>,      <a href="http://tomasp.net/blog/archive/november-2004/index.html">
        November 2004 (2)</a>,    </div>
    <div class="large-2 columns">
      <h4>License</h4>
      <p>Unless explicitly mentioned, all articles on this site are licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a>. 
        All source code samples are licensed under Apache 2.0.
      </p>
      <img src="http://tomasp.net/img/cc-sa.png" alt="CC License logo" />
    </div>
  </footer>
  </div>
  
  <script>
  document.write('<script src=' +
  ('__proto__' in {} ? 'http://tomasp.net/js/vendor/zepto' : 'http://tomasp.net/js/vendor/jquery') +
  '.js><\/script>')
  </script>
  
  <script src="http://tomasp.net/js/foundation.min.js"></script>
  <script>
    $(document).foundation();
  </script>
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1561220-1']);
    _gaq.push(['_trackPageview']);

    (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
  <script src="http://cdn.lanyrd.net/badges/person-v1.min.js"></script>
</body>
</html>